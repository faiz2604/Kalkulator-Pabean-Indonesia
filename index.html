<!DOCTYPE html>
<html lang="id">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VEC8RNWJLP"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-VEC8RNWJLP');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Informasi Kepabeanan Indonesia</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-image: linear-gradient(rgba(239, 246, 255, 0.96), rgba(239, 246, 255, 0.96)), url('https://images.unsplash.com/photo-1616434315428-91285c578f33?q=80&w=2070&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        .sticky-header {
            position: sticky;
            top: 0;
            z-index: 50;
            backdrop-filter: blur(10px);
            background-color: rgba(255,255,255,0.8);
        }
        .nav-link {
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            transition: background-color 0.2s, color 0.2s, box-shadow 0.2s;
            cursor: pointer;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .nav-link.active {
            background-image: linear-gradient(to right, #4f46e5, #2563eb);
            color: white;
            font-weight: 600;
            box-shadow: 0 4px 14px 0 rgb(0 118 255 / 39%);
        }
        .nav-link:not(.active):hover {
            background-color: #EFF6FF;
            color: #1D4ED8;
        }
        .lang-btn {
            padding: 0.25rem 0.75rem;
            border-radius: 0.5rem;
            border: 1px solid #D1D5DB;
            transition: background-color 0.2s, color 0.2s;
            cursor: pointer;
            font-weight: 500;
        }
        .lang-btn.active {
            background-color: #2563EB;
            color: white;
            border-color: #2563EB;
        }
        .page-content {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .page-content.active {
            display: block;
        }
        .section-card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.07), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            margin-bottom: 1.5rem;
            overflow: hidden;
            border: 1px solid #e5e7eb;
        }
        .card-content {
            padding: 1.5rem;
        }
        .input-field {
            width: 100%; padding: 0.75rem; border: 1px solid #D1D5DB; border-radius: 0.5rem; transition: border-color 0.2s, box-shadow 0.2s; text-align: right;
        }
        .input-field:focus {
            outline: none; border-color: #3B82F6; box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }
        .input-field:disabled {
            background-color: #F3F4F6; cursor: not-allowed;
        }
        .btn {
            padding: 0.75rem 1.5rem; border-radius: 0.5rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease-in-out; display: inline-flex; align-items: center; justify-content: center;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px 0 rgb(0 0 0 / 0.15);
        }
        .btn-primary { 
            background-image: linear-gradient(to right, #4f46e5, #2563eb); 
            color: white; 
        }
        .btn-primary:hover { 
            background-image: linear-gradient(to right, #4338ca, #1d4ed8);
        }
        .btn-secondary { background-color: #6B7280; color: white; }
        .btn-secondary:hover { background-color: #4B5563; }
        .btn-danger { background-color: #EF4444; color: white; }
        .btn-danger:hover { background-color: #DC2626; }
        .btn-export { background-color: #16A34A; color: white; }
        .btn-export:hover { background-color: #15803D; }
        .result-display {
            background-color: #F3F4F6; padding: 1rem; border-radius: 0.5rem; margin-top: 1rem; font-size: 1.125rem; font-weight: 600; color: #1F2937;
        }
        h1 { 
            font-size: 2.25rem; 
            font-weight: 800;
            background: linear-gradient(to right, #4f46e5, #1d4ed8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        @media (min-width: 768px) {
            h1 { font-size: 3rem; }
        }
        h2 { 
            font-size: 1.5rem; font-weight: 700; color: white;
            background-image: linear-gradient(to right, #3b82f6, #6366f1);
            padding: 1rem 1.5rem;
            margin: -1.5rem -1.5rem 1.5rem -1.5rem;
            border-bottom: 1px solid #BFDBFE;
        }
        /* --- STYLES FOR CONTENT PAGES --- */
        .content-wrapper .content-section {
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid #e5e7eb;
        }
        .content-wrapper .content-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        .content-wrapper h3 {
            font-size: 1.75rem;
            font-weight: 700;
            color: #1F2937;
            margin-bottom: 1rem;
        }
        .content-wrapper h4 {
            font-size: 1.25rem;
            font-weight: 600;
            color: #111827;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #e5e7eb;
        }
        .content-wrapper p, .content-wrapper ul, .content-wrapper ol {
            margin-bottom: 1rem;
            line-height: 1.7;
            color: #374151;
        }
        .content-wrapper ul, .content-wrapper ol {
            padding-left: 1.5rem;
        }
        .content-wrapper ul { list-style-type: disc; }
        .content-wrapper ol { list-style-type: decimal; }
        .content-wrapper .analysis-box {
            background-color: #f9fafb;
            border-left: 4px solid #3b82f6;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 0.25rem;
        }
        .content-wrapper .glossary-term {
            padding-bottom: 1.25rem;
            margin-bottom: 1.25rem;
            border-bottom: 1px dashed #d1d5db;
        }
        .content-wrapper .glossary-term:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        .content-wrapper .glossary-term h4 {
            font-size: 1.15rem;
            font-weight: 600;
            color: #1e3a8a;
            border-bottom: none;
            margin-top: 0;
        }
        /* --- FLOWCHART DIAGRAM STYLES --- */
        .flowchart { display: flex; flex-direction: column; align-items: center; gap: 0.5rem; }
        .flowchart-step {
            background-color: #fff; border: 1px solid #e5e7eb; border-radius: 0.75rem; padding: 1rem 1.5rem; width: 80%; text-align: center; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); position: relative;
        }
        .flowchart-step .step-number { font-weight: 800; font-size: 1.5rem; color: #dbeafe; position: absolute; top: 0.5rem; left: 1rem; }
        .flowchart-step .step-title { font-weight: 600; color: #1e3a8a; font-size: 1.125rem; }
        .flowchart-step .step-desc { font-size: 0.875rem; color: #4b5563; }
        .flowchart-arrow { height: 2.5rem; width: 2px; background-color: #9ca3af; position: relative; }
        .flowchart-arrow::after {
            content: ''; position: absolute; bottom: -1px; left: 50%; transform: translateX(-50%); border-left: 8px solid transparent; border-right: 8px solid transparent; border-top: 8px solid #9ca3af;
        }
        .flowchart-split { display: flex; justify-content: center; width: 100%; gap: 1rem; align-items: flex-start; }
        .flowchart-split-path { display: flex; flex-direction: column; align-items: center; gap: 0.5rem; flex: 1; }
        
        table { width: 100%; margin-top: 1rem; border-collapse: collapse; }
        th, td { text-align: left; padding: 0.75rem; border-bottom: 1px solid #E5E7EB; vertical-align: middle; }
        thead th { background-color: #F9FAFB; font-weight: 600; color: #374151; }
        tfoot td { 
            font-weight: 700;
            background-image: linear-gradient(to right, #dbeafe, #e0e7ff);
            color: #1e3a8a;
        }
        .text-right { text-align: right; }
        details > summary {
            cursor: pointer;
            font-weight: 500;
            color: #3B82F6;
        }
        #notification {
            position: fixed;
            top: 1.5rem;
            right: 1.5rem;
            background-color: #EF4444;
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            transform: translateX(200%);
            transition: transform 0.5s ease-in-out;
            z-index: 100;
        }
        #notification.show {
            transform: translateX(0);
        }
        /* --- QUIZ STYLES --- */
        .quiz-category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
        }
        .quiz-category-card {
            background-color: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 0.75rem;
            padding: 1.5rem;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }
        .quiz-category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.05);
        }
        .quiz-question {
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #e5e7eb;
        }
        .quiz-options label {
            display: block;
            background-color: #f9fafb;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
            cursor: pointer;
            border: 1px solid #e5e7eb;
            transition: background-color 0.2s, border-color 0.2s;
        }
        .quiz-options label:hover {
            background-color: #eff6ff;
            border-color: #93c5fd;
        }
        .quiz-options input[type="radio"]:checked + span {
            font-weight: 600;
            color: #2563eb;
        }
        .quiz-options input[type="radio"] {
            display: none;
        }
        .correct-answer {
            background-color: #dcfce7 !important;
            border-color: #4ade80 !important;
        }
        .wrong-answer {
            background-color: #fee2e2 !important;
            border-color: #f87171 !important;
        }
        .essay-answer {
            width: 100%;
            min-height: 150px;
        }
        .model-answer {
            margin-top: 1rem;
            padding: 1rem;
            background-color: #f0f9ff;
            border-left: 4px solid #38bdf8;
            border-radius: 0.25rem;
        }

    </style>
</head>
<body>

    <div class="sticky-header shadow-md mb-8">
        <div class="container mx-auto p-4 max-w-7xl">
            <header class="text-center md:text-left flex flex-col md:flex-row justify-between items-center">
                <h1 class="font-bold text-gray-800" data-lang-key="portal_title">Portal Informasi Kepabeanan Indonesia</h1>
                <div class="flex space-x-2 mt-2 md:mt-0">
                    <button id="lang-id" class="lang-btn active" onclick="setLanguage('id')">ID</button>
                    <button id="lang-en" class="lang-btn" onclick="setLanguage('en')">EN</button>
                </div>
            </header>
            <!-- Navigation -->
            <nav class="bg-white/0 mt-4 flex flex-wrap gap-2 justify-center">
                <a class="nav-link active" onclick="showPage('kalkulator', this)"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.5 2A1.5 1.5 0 004 3.5v13A1.5 1.5 0 005.5 18h9a1.5 1.5 0 001.5-1.5v-13A1.5 1.5 0 0014.5 2h-9zM5 3.5a.5.5 0 01.5-.5h9a.5.5 0 01.5.5v13a.5.5 0 01-.5.5h-9a.5.5 0 01-.5-.5v-13z" clip-rule="evenodd" /><path d="M6.75 6a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5z" /><path d="M6.75 9.5a.75.75 0 000 1.5h3.5a.75.75 0 000-1.5h-3.5z" /></svg><span data-lang-key="nav_calculators">Kalkulator</span></a>
                <a class="nav-link" onclick="showPage('alur-impor', this)"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm.75-11.25a.75.75 0 00-1.5 0v4.59L7.3 9.7a.75.75 0 00-1.06 1.06l3.25 3.25a.75.75 0 001.06 0l3.25-3.25a.75.75 0 10-1.06-1.06L10.75 11.34V6.75z" clip-rule="evenodd" /></svg><span data-lang-key="nav_import_flow">Alur Impor</span></a>
                <a class="nav-link" onclick="showPage('alur-ekspor', this)"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm-.75-4.75a.75.75 0 001.5 0V8.66l1.97 1.97a.75.75 0 101.06-1.06l-3.25-3.25a.75.75 0 00-1.06 0L6.24 9.57a.75.75 0 001.06 1.06L9.25 8.66v4.59z" clip-rule="evenodd" /></svg><span data-lang-key="nav_export_flow">Alur Ekspor</span></a>
                <a class="nav-link" onclick="showPage('kuota-impor', this)"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 2a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2V4a2 2 0 00-2-2H4zm3.5 4.5a.75.75 0 00-1.5 0v5.5a.75.75 0 001.5 0v-5.5zM9.25 6a.75.75 0 00-1.5 0v8a.75.75 0 001.5 0v-8zm3.5.75a.75.75 0 011.5 0v5.5a.75.75 0 01-1.5 0v-5.5z" clip-rule="evenodd" /></svg><span data-lang-key="nav_import_quota">Kuota Impor</span></a>
                <a class="nav-link" onclick="showPage('fasilitas', this)"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M10.75 2.75a.75.75 0 00-1.5 0v8.25a.75.75 0 001.5 0V2.75z" /><path fill-rule="evenodd" d="M3.235 10.213a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.06 0l2.25-2.25a.75.75 0 00-1.06-1.06L5 11.94V10.5a.75.75 0 00-.75-.75h-1.5a.75.75 0 00-.75.75v1.44l-1.215-1.214zM10 10.5a.75.75 0 01.75-.75h1.5a.75.75 0 01.75.75v4.25a.75.75 0 01-1.5 0V10.5zM15.5 9.75a.75.75 0 00-.75.75v1.44l-1.215-1.214a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.06 0l2.25-2.25a.75.75 0 10-1.06-1.06L16.5 11.94V10.5a.75.75 0 00-.75-.75h-1.5z" clip-rule="evenodd" /></svg><span data-lang-key="nav_facilities">Analisis Fasilitas</span></a>
                <a class="nav-link" onclick="showPage('studi-kasus', this)"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd" /></svg><span data-lang-key="nav_case_studies">Studi Kasus</span></a>
                <a class="nav-link" onclick="showPage('peraturan', this)"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M3.5 2A1.5 1.5 0 002 3.5v13A1.5 1.5 0 003.5 18h13a1.5 1.5 0 001.5-1.5V6.857a1.5 1.5 0 00-.44-1.06l-4.857-4.857A1.5 1.5 0 0011.857 2H3.5zM11 5V2.5L15.5 7H12.5a1.5 1.5 0 01-1.5-1.5z" /></svg><span data-lang-key="nav_regulations">Pusat Peraturan</span></a>
                <a class="nav-link" onclick="showPage('glosarium', this)"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M3.5 2A1.5 1.5 0 002 3.5v12A1.5 1.5 0 003.5 17h1.5v1.167a.75.75 0 001.29.53l2.433-2.433A.75.75 0 019.207 16H16.5a1.5 1.5 0 001.5-1.5v-11A1.5 1.5 0 0016.5 2h-13z" /></svg><span data-lang-key="nav_glossary">Glosarium</span></a>
                <a class="nav-link" onclick="showPage('kuis', this)"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-5.5-2.5a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0zM10 12a5.99 5.99 0 00-4.793 2.39A6.483 6.483 0 0010 16.5a6.483 6.483 0 004.793-2.11A5.99 5.99 0 0010 12z" clip-rule="evenodd" /></svg><span data-lang-key="nav_quiz">Kuis Pabean</span></a>
            </nav>
        </div>
    </div>

    <div class="container mx-auto p-4 md:px-8 max-w-7xl">
        <!-- Page Content -->
        <main>
            <!-- Kalkulator Page -->
            <div id="kalkulator" class="page-content active">
                <div class="section-card">
                    <h2 data-lang-key="kalkulator_pib_title">Kalkulator PIB (Termasuk Bea Masuk Anti Dumping)</h2>
                    <div class="card-content">
                        <details class="mb-4 bg-blue-50 p-4 rounded-lg">
                            <summary data-lang-key="pib_guidance_summary">Tampilkan Petunjuk Pengisian</summary>
                            <div class="mt-2 text-sm text-gray-700 space-y-2" data-lang-key="pib_guidance_content">
                                <p><strong>Total Insurance:</strong> Masukkan total biaya asuransi pengiriman barang dari luar negeri.</p>
                                <p><strong>Total Freight:</strong> Masukkan total biaya pengangkutan/pengiriman barang (ongkos kirim).</p>
                                <p><strong>Total Royalty & Lisensi:</strong> Biaya yang harus dibayar sebagai syarat penjualan barang impor (jika ada).</p>
                                <p><strong>Total Garansi:</strong> Biaya penggantian atau perbaikan yang ditanggung pembeli (jika ada).</p>
                                <p><strong>Total Diskon:</strong> Potongan harga yang didapat dari total nilai barang.</p>
                                <p><strong>Cost Barang:</strong> Masukkan harga per-item/per-jenis barang sesuai invoice.</p>
                                <p><strong>Tarif BM & BMAD:</strong> Masukkan tarif Bea Masuk dan Bea Masuk Anti Dumping dalam persen (%). Isi 0 jika tidak ada.</p>
                            </div>
                        </details>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 border-b pb-6 mb-6">
                            <div><label class="block text-sm font-medium text-gray-700 mb-1" for="pib-number" data-lang-key="label_pib_number">Nomor PIB</label><input type="text" id="pib-number" class="input-field !text-left" placeholder="000123-20250725-123456"></div>
                            <div><label class="block text-sm font-medium text-gray-700 mb-1" for="main-insurance" data-lang-key="label_total_insurance">Total Insurance (Rp)</label><input type="text" id="main-insurance" class="input-field number-input" placeholder="150.000" inputmode="numeric"></div>
                            <div><label class="block text-sm font-medium text-gray-700 mb-1" for="main-freight" data-lang-key="label_total_freight">Total Freight (Rp)</label><input type="text" id="main-freight" class="input-field number-input" placeholder="1.500.000" inputmode="numeric"></div>
                            <div><label class="block text-sm font-medium text-gray-700 mb-1" for="main-royalty" data-lang-key="label_total_royalty">Total Royalty & Lisensi (Rp)</label><input type="text" id="main-royalty" class="input-field number-input" placeholder="0" inputmode="numeric"></div>
                            <div><label class="block text-sm font-medium text-gray-700 mb-1" for="main-warranty" data-lang-key="label_total_warranty">Total Garansi (Rp)</label><input type="text" id="main-warranty" class="input-field number-input" placeholder="0" inputmode="numeric"></div>
                            <div><label class="block text-sm font-medium text-gray-700 mb-1" for="main-discount" data-lang-key="label_total_discount">Total Diskon (Rp)</label><input type="text" id="main-discount" class="input-field number-input" placeholder="0" inputmode="numeric"></div>
                            <div><label class="block text-sm font-medium text-gray-700 mb-1" for="main-pph-tarif" data-lang-key="label_pph_rate">Tarif PPh Ps. 22</label><select id="main-pph-tarif" class="input-field !text-left"><option value="0.025" data-lang-key="pph_option_1">2,5% (Dengan API)</option><option value="0.075" data-lang-key="pph_option_2">7,5% (Tanpa API)</option><option value="0.1" data-lang-key="pph_option_3">10% (Tertentu)</option><option value="0.005" data-lang-key="pph_option_4">0,5% (Tertentu)</option></select></div>
                        </div>
                        
                        <div class="hidden md:grid md:grid-cols-12 gap-4 px-4 py-2 text-sm font-semibold text-gray-600 bg-gray-50 rounded-t-lg">
                            <div class="md:col-span-1" data-lang-key="th_serial">Serial</div>
                            <div class="md:col-span-5" data-lang-key="th_item_cost">Cost Barang (Rp)</div>
                            <div class="md:col-span-2" data-lang-key="th_bm_rate">Tarif BM (%)</div>
                            <div class="md:col-span-2" data-lang-key="th_bmad_rate">Tarif BMAD (%)</div>
                            <div class="md:col-span-2" data-lang-key="th_action">Aksi</div>
                        </div>
                        <div id="items-container" class="space-y-4 md:space-y-0"></div>

                        <button id="add-item-btn" class="btn btn-primary mt-4"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path d="M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z" /></svg><span data-lang-key="btn_add_item">Tambah Barang</span></button><hr class="my-6"><div class="flex flex-wrap gap-4"><button onclick="calculateMain()" class="btn btn-primary text-lg" data-lang-key="btn_calculate_pib">Hitung & Detailkan PIB</button><button onclick="resetMain()" class="btn btn-secondary" data-lang-key="btn_reset">Reset</button></div>
                        <div id="pib-results-detail" class="mt-4 hidden"><h3 class="text-lg font-semibold mb-2" data-lang-key="pib_result_title">Detail Perhitungan PIB</h3><div class="overflow-x-auto"><table id="pib-results-table"><thead><tr><th data-lang-key="th_serial">Serial</th><th class="text-right" data-lang-key="th_customs_value">Nilai Pabean</th><th class="text-right" data-lang-key="th_import_duty">Bea Masuk</th><th class="text-right" data-lang-key="th_add">BM Anti Dumping</th><th class="text-right" data-lang-key="th_import_value">Nilai Impor</th><th class="text-right" data-lang-key="th_vat">PPN</th><th class="text-right" data-lang-key="th_pph22">PPh 22</th></tr></thead><tbody id="pib-results-body"></tbody><tfoot id="pib-results-foot"></tfoot></table></div><div class="flex flex-wrap gap-4 mt-4"><button onclick="exportPIB('xlsx')" class="btn btn-export"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path d="M2.5 2A1.5 1.5 0 001 3.5v13A1.5 1.5 0 002.5 18h15a1.5 1.5 0 001.5-1.5v-13A1.5 1.5 0 0017.5 2h-15zM2 3.5a.5.5 0 01.5-.5h15a.5.5 0 01.5.5v13a.5.5 0 01-.5.5h-15a.5.5 0 01-.5-.5v-13z" /><path d="M12.5 12.5a.5.5 0 01-.5.5h-2a.5.5 0 010-1h2a.5.5 0 01.5.5zM10 10a.5.5 0 01.5.5v2a.5.5 0 01-1 0v-2A.5.5 0 0110 10zM7.5 6a.5.5 0 01.5.5v7a.5.5 0 01-1 0v-7a.5.5 0 01.5-.5zM12 6.5a.5.5 0 00-1 0v2a.5.5 0 001 0v-2z" /></svg><span data-lang-key="btn_export_excel">Export ke Excel</span></button><button onclick="exportPIB('csv')" class="btn btn-export"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 2a8 8 0 100 16 8 8 0 000-16zM8.23 6.023a.75.75 0 011.06 0l3.25 3.25a.75.75 0 010 1.06l-3.25 3.25a.75.75 0 11-1.06-1.06L10.94 10 8.23 7.083a.75.75 0 010-1.06z" clip-rule="evenodd" /></svg><span data-lang-key="btn_export_csv">Export ke CSV</span></button></div></div>
                        <div id="pib-calculation-explanation" class="mt-6 hidden bg-gray-50 p-4 rounded-lg"></div>
                    </div>
                </div>
                <div class="section-card"><h2 data-lang-key="kalkulator_sanksi_title">Kalkulator Sanksi Administrasi</h2><div class="card-content"><div id="sanksi-placeholder" class="text-center p-8 bg-gray-100 rounded-lg"><p class="text-gray-600 font-medium" data-lang-key="sanksi_placeholder">Lengkapi dan hitung detail PIB di atas terlebih dahulu untuk mengaktifkan kalkulator sanksi.</p></div><div id="sanksi-content" class="hidden"><div class="grid grid-cols-1 md:grid-cols-2 gap-x-6"><div class="input-group"><label class="block text-sm font-medium text-gray-700 mb-1" for="sanksi-jenis-pelanggaran" data-lang-key="label_error_type">Jenis Kesalahan</label><select id="sanksi-jenis-pelanggaran" class="input-field !text-left" onchange="toggleSanksiInput()"><option value="nilai_pabean" data-lang-key="error_type_value">Kesalahan Nilai Pabean</option><option value="tarif" data-lang-key="error_type_rate">Kesalahan Tarif</option></select></div><div class="input-group"><label class="block text-sm font-medium text-gray-700 mb-1" for="sanksi-jenis-importir" data-lang-key="label_importer_type">Jenis Importir</label><select id="sanksi-jenis-importir" class="input-field !text-left"><option value="umum" data-lang-key="importer_type_general">Importir Umum</option><option value="fasilitas" data-lang-key="importer_type_facility">Importir Fasilitas (AEO/MITA/Kawasan Berikat/KITE)*</option></select></div></div><div class="overflow-x-auto"><table id="sanksi-input-table"><thead></thead><tbody id="sanksi-items-container"></tbody></table></div><p class="text-xs text-gray-500 mt-2 mb-4" data-lang-key="sanksi_note">*Skema denda berjenjang akan diterapkan otomatis sesuai aturan.</p><button onclick="calculateSanksi()" class="btn btn-primary" data-lang-key="btn_calculate_sanction">Hitung Sanksi</button><div id="sanksi-result-container" class="mt-4 space-y-2 hidden"><div class="result-display"><span data-lang-key="sanksi_result_paid">Total BM Dibayar</span>: <span id="sanksi-total-bm-dibayar"></span></div><div class="result-display"><span data-lang-key="sanksi_result_should_be">Total BM Seharusnya</span>: <span id="sanksi-total-bm-seharusnya"></span></div><div class="result-display"><span data-lang-key="sanksi_result_shortage">Kekurangan Pembayaran BM</span>: <span id="sanksi-result-kurang"></span></div><div class="result-display"><span data-lang-key="sanksi_result_percentage">Persentase Kekurangan</span>: <span id="sanksi-result-persen"></span></div><div class="result-display"><span data-lang-key="sanksi_result_applicable_rate">Tarif Denda Berlaku</span>: <span id="sanksi-result-tarif"></span></div><div class="result-display bg-red-100 text-red-800"><strong data-lang-key="sanksi_result_total_fine">Total Denda</strong>: <span id="sanksi-result-denda"></span></div><div class="flex flex-wrap gap-4 mt-4"><button onclick="exportSanksi('xlsx')" class="btn btn-export" data-lang-key="btn_export_excel">Export ke Excel</button><button onclick="exportSanksi('csv')" class="btn btn-export" data-lang-key="btn_export_csv">Export ke CSV</button></div></div></div></div></div>
                <div class="section-card"><h2>Kalkulator Impor Sementara</h2><div class="card-content"><p data-lang-key="temp_import_desc">Simulasikan pembayaran untuk impor sementara. Masukkan total pungutan yang seharusnya dibayar jika impor biasa, dan jangka waktu penggunaan.</p><div class="grid grid-cols-1 md:grid-cols-2 gap-x-6"><div class="input-group"><label class="block text-sm font-medium text-gray-700 mb-1" for="is-bm" data-lang-key="label_total_bm_should_be">Total Bea Masuk Seharusnya (Rp)</label><input type="text" id="is-bm" class="input-field number-input" placeholder="18.462.500" inputmode="numeric"></div><div class="input-group"><label class="block text-sm font-medium text-gray-700 mb-1" for="is-ppn" data-lang-key="label_total_vat_should_be">Total PPN Seharusnya (Rp)</label><input type="text" id="is-ppn" class="input-field number-input" placeholder="25.240.875" inputmode="numeric"></div><div class="input-group"><label class="block text-sm font-medium text-gray-700 mb-1" for="is-pph" data-lang-key="label_total_pph_should_be">Total PPh 22 Seharusnya (Rp)</label><input type="text" id="is-pph" class="input-field number-input" placeholder="5.736.563" inputmode="numeric"></div><div class="input-group"><label class="block text-sm font-medium text-gray-700 mb-1" for="is-jw" data-lang-key="label_period_months">Jangka Waktu (Bulan)</label><input type="number" id="is-jw" class="input-field" placeholder="12" inputmode="numeric"></div></div><button onclick="calculateImporSementara()" class="btn btn-primary" data-lang-key="btn_calculate_temp_import">Hitung Impor Sementara</button><div id="is-result-container" class="mt-4 space-y-2 hidden"><div class="result-display"><span data-lang-key="temp_import_total_levies">Total Pungutan Seharusnya</span>: <span id="is-total-pungutan"></span></div><div class="result-display"><span data-lang-key="temp_import_monthly_payment">Pembayaran per Bulan (2%)</span>: <span id="is-per-bulan"></span></div><div class="result-display bg-blue-100 text-blue-800"><strong data-lang-key="temp_import_total_payment">Total Bayar Impor Sementara</strong>: <span id="is-total-bayar"></span></div></div></div></div>
            </div>
            
            <!-- Alur Impor Page -->
            <div id="alur-impor" class="page-content"><div class="section-card"><h2 data-lang-key="import_flow_title">Skema Alur Importasi Barang</h2><div class="card-content content-wrapper" data-lang-key="import_flow_content"></div></div></div>

            <!-- Alur Ekspor Page -->
            <div id="alur-ekspor" class="page-content"><div class="section-card"><h2 data-lang-key="export_flow_title">Skema Alur Eksportasi Barang</h2><div class="card-content content-wrapper" data-lang-key="export_flow_content"></div></div></div>

            <!-- Kuota Impor Page -->
            <div id="kuota-impor" class="page-content"><div class="section-card"><h2 data-lang-key="quota_title">Syarat Kuota Impor (Permendag 16-24 Tahun 2025)</h2><div class="card-content content-wrapper" data-lang-key="quota_content"></div></div></div>

            <!-- Fasilitas Page -->
            <div id="fasilitas" class="page-content"><div class="section-card"><h2 data-lang-key="facilities_title">Analisis Fasilitas Kepabeanan</h2><div class="card-content content-wrapper" data-lang-key="facilities_content"></div></div></div>
            
            <!-- Studi Kasus Page -->
            <div id="studi-kasus" class="page-content"><div class="section-card"><h2 data-lang-key="case_studies_title">Studi Kasus Kepabeanan</h2><div class="card-content content-wrapper" data-lang-key="case_studies_content"></div></div></div>

            <!-- Peraturan Page -->
            <div id="peraturan" class="page-content"><div class="section-card"><h2 data-lang-key="regulations_title">Pusat Peraturan</h2><div class="card-content content-wrapper" data-lang-key="regulations_content"></div></div></div>

            <!-- Glosarium Page -->
            <div id="glosarium" class="page-content"><div class="section-card"><h2 data-lang-key="glossary_title">Glosarium Istilah Kepabeanan</h2><div class="card-content content-wrapper" data-lang-key="glossary_content"></div></div></div>
            
            <!-- Quiz Page -->
            <div id="kuis" class="page-content">
                <div id="quiz-menu" class="section-card">
                    <h2 data-lang-key="quiz_title">Kuis Pabean</h2>
                    <div class="card-content">
                        <p class="mb-6 text-gray-600" data-lang-key="quiz_intro">Uji pengetahuan Anda tentang berbagai aspek kepabeanan. Pilih salah satu kategori di bawah ini untuk memulai.</p>
                        <div id="quiz-category-grid" class="quiz-category-grid">
                            <!-- Categories will be dynamically inserted here by JavaScript -->
                        </div>
                    </div>
                </div>

                <div id="quiz-container" class="hidden">
                    <div class="section-card">
                        <h2 id="quiz-header-title"></h2>
                        <div class="card-content">
                            <div id="quiz-questions-container"></div>
                            <div class="mt-6 flex justify-between items-center">
                                <button id="submit-quiz-btn" class="btn btn-primary text-lg"></button>
                                <button onclick="returnToQuizMenu()" class="btn btn-secondary" data-lang-key="btn_back_to_menu">Kembali ke Menu</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="quiz-results-container" class="section-card hidden">
                    <h2 data-lang-key="quiz_result_title">Hasil Kuis</h2>
                    <div class="card-content text-center">
                        <p class="text-lg font-medium text-gray-700" data-lang-key="quiz_score_label">Skor Anda:</p>
                        <p id="quiz-score" class="text-5xl font-bold my-4 bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-indigo-600"></p>
                        <p id="quiz-summary" class="text-gray-600 mb-6"></p>
                        <button onclick="returnToQuizMenu()" class="btn btn-primary" data-lang-key="btn_back_to_menu">Kembali ke Menu</button>
                    </div>
                </div>
            </div>

        </main>
    </div>
    
    <footer class="bg-gray-800 text-white text-center p-6 mt-12">
        <div class="container mx-auto">
            <p class="font-semibold text-lg mb-2" data-lang-key="footer_created_by">Dibuat oleh Muhammad Faiz Lubis</p>
            <p class="text-sm text-gray-400 mb-4" data-lang-key="footer_desc">Portal ini adalah proyek portofolio untuk mendemonstrasikan keahlian dalam pengembangan web dan pengetahuan kepabeanan.</p>
            <a href="https://www.linkedin.com/in/muhammad-faiz-lubis-18019b41/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition-colors">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M20.5 2h-17A1.5 1.5 0 002 3.5v17A1.5 1.5 0 003.5 22h17a1.5 1.5 0 001.5-1.5v-17A1.5 1.5 0 0020.5 2zM8 19H5v-9h3v9zM6.5 8.25A1.75 1.75 0 118.25 6.5 1.75 1.75 0 016.5 8.25zM19 19h-3v-4.74c0-1.42-.6-2.16-1.9-2.16-1.3 0-2.1.8-2.1 2.16V19h-3v-9h2.9v1.3h.04c.42-.78 1.44-1.6 3.16-1.6 3.38 0 3.96 2.22 3.96 5.09V19z"></path></svg>
                <span data-lang-key="footer_contact">Hubungi untuk Konsultasi</span>
            </a>
        </div>
    </footer>

    <div id="notification" class=""></div>

<script>
// --- TRANSLATION DATA ---
const translations = {
    "portal_title": {"id": "Portal Informasi Kepabeanan Indonesia", "en": "Indonesian Customs Information Portal"},
    "nav_calculators": {"id": "Kalkulator", "en": "Calculators"},
    "nav_import_flow": {"id": "Alur Impor", "en": "Import Flow"},
    "nav_export_flow": {"id": "Alur Ekspor", "en": "Export Flow"},
    "nav_import_quota": {"id": "Kuota Impor", "en": "Import Quota"},
    "nav_facilities": {"id": "Analisis Fasilitas", "en": "Facilities Analysis"},
    "nav_case_studies": {"id": "Studi Kasus", "en": "Case Studies"},
    "nav_regulations": {"id": "Pusat Peraturan", "en": "Regulation Center"},
    "nav_glossary": {"id": "Glosarium", "en": "Glossary"},
    "nav_quiz": {"id": "Kuis Pabean", "en": "Customs Quiz"},
    "kalkulator_pib_title": {"id": "Kalkulator PIB (Termasuk Bea Masuk Anti Dumping)", "en": "Import Declaration Calculator (incl. Anti-Dumping Duty)"},
    "pib_guidance_summary": {"id": "Tampilkan Petunjuk Pengisian", "en": "Show Filling Instructions"},
    "pib_guidance_content": {"id": `<p><strong>Total Insurance:</strong> Masukkan total biaya asuransi pengiriman barang dari luar negeri.</p><p><strong>Total Freight:</strong> Masukkan total biaya pengangkutan/pengiriman barang (ongkos kirim).</p><p><strong>Total Royalty & Lisensi:</strong> Biaya yang harus dibayar sebagai syarat penjualan barang impor (jika ada).</p><p><strong>Total Garansi:</strong> Biaya penggantian atau perbaikan yang ditanggung pembeli (jika ada).</p><p><strong>Total Diskon:</strong> Potongan harga yang didapat dari total nilai barang.</p><p><strong>Cost Barang:</strong> Masukkan harga per-item/per-jenis barang sesuai invoice.</p><p><strong>Tarif BM & BMAD:</strong> Masukkan tarif Bea Masuk dan Bea Masuk Anti Dumping dalam persen (%). Isi 0 jika tidak ada.</p>`, "en": `<p><strong>Total Insurance:</strong> Enter the total insurance cost for shipping the goods from abroad.</p><p><strong>Total Freight:</strong> Enter the total freight cost for shipping the goods.</p><p><strong>Total Royalty & License:</strong> Fees that must be paid as a condition of the sale of imported goods (if any).</p><p><strong>Total Warranty:</strong> Cost of replacement or repair borne by the buyer (if any).</p><p><strong>Total Discount:</strong> Price reduction obtained from the total value of the goods.</p><p><strong>Item Cost:</strong> Enter the price per item/type of goods according to the invoice.</p><p><strong>ID & ADD Tariff:</strong> Enter the Import Duty and Anti-Dumping Duty tariffs in percent (%). Enter 0 if none.</p>`},
    "label_pib_number": {"id": "Nomor PIB", "en": "Import Declaration No."},
    "label_total_insurance": {"id": "Total Insurance (Rp)", "en": "Total Insurance (IDR)"},
    "label_total_freight": {"id": "Total Freight (Rp)", "en": "Total Freight (IDR)"},
    "label_total_royalty": {"id": "Total Royalty & Lisensi (Rp)", "en": "Total Royalty & License (IDR)"},
    "label_total_warranty": {"id": "Total Garansi (Rp)", "en": "Total Warranty (IDR)"},
    "label_total_discount": {"id": "Total Diskon (Rp)", "en": "Total Discount (IDR)"},
    "label_pph_rate": {"id": "Tarif PPh Ps. 22", "en": "Income Tax Art. 22 Rate"},
    "pph_option_1": {"id": "2,5% (Dengan API)", "en": "2.5% (With Importer ID)"},
    "pph_option_2": {"id": "7,5% (Tanpa API)", "en": "7.5% (Without Importer ID)"},
    "pph_option_3": {"id": "10% (Tertentu)", "en": "10% (Specific)"},
    "pph_option_4": {"id": "0,5% (Tertentu)", "en": "0.5% (Specific)"},
    "th_serial": {"id": "Serial", "en": "Serial"},
    "th_item_cost": {"id": "Cost Barang (Rp)", "en": "Item Cost (IDR)"},
    "th_bm_rate": {"id": "Tarif BM (%)", "en": "ID Tariff (%)"},
    "th_bmad_rate": {"id": "Tarif BMAD (%)", "en": "ADD Tariff (%)"},
    "th_action": {"id": "Aksi", "en": "Action"},
    "btn_add_item": {"id": "Tambah Barang", "en": "Add Item"},
    "btn_calculate_pib": {"id": "Hitung & Detailkan PIB", "en": "Calculate & Detail"},
    "btn_reset": {"id": "Reset", "en": "Reset"},
    "pib_result_title": {"id": "Detail Perhitungan PIB", "en": "Import Declaration Calculation Details"},
    "th_customs_value": {"id": "Nilai Pabean", "en": "Customs Value"},
    "th_import_duty": {"id": "Bea Masuk", "en": "Import Duty"},
    "th_add": {"id": "BM Anti Dumping", "en": "Anti-Dumping Duty"},
    "th_import_value": {"id": "Nilai Impor", "en": "Import Value"},
    "th_vat": {"id": "PPN", "en": "VAT"},
    "th_pph22": {"id": "PPh 22", "en": "Income Tax 22"},
    "btn_export_excel": {"id": "Export ke Excel", "en": "Export to Excel"},
    "btn_export_csv": {"id": "Export ke CSV", "en": "Export to CSV"},
    "kalkulator_sanksi_title": {"id": "Kalkulator Sanksi Administrasi", "en": "Administrative Sanction Calculator"},
    "sanksi_placeholder": {"id": "Lengkapi dan hitung detail PIB di atas terlebih dahulu untuk mengaktifkan kalkulator sanksi.", "en": "Complete and calculate the Import Declaration details above to activate the sanction calculator."},
    "label_error_type": {"id": "Jenis Kesalahan", "en": "Type of Error"},
    "error_type_value": {"id": "Kesalahan Nilai Pabean", "en": "Customs Value Error"},
    "error_type_rate": {"id": "Kesalahan Tarif", "en": "Tariff Error"},
    "label_importer_type": {"id": "Jenis Importir", "en": "Importer Type"},
    "importer_type_general": {"id": "Importir Umum", "en": "General Importer"},
    "importer_type_facility": {"id": "Importir Fasilitas (AEO/MITA/Kawasan Berikat/KITE)*", "en": "Facility Importer (AEO/MITA/Bonded Zone/KITE)*"},
    "sanksi_note": {"id": "*Skema denda berjenjang akan diterapkan otomatis sesuai aturan.", "en": "*Tiered fine scheme will be applied automatically according to regulations."},
    "btn_calculate_sanction": {"id": "Hitung Sanksi", "en": "Calculate Sanction"},
    "sanksi_result_paid": {"id": "Total BM Dibayar", "en": "Total Import Duty Paid"},
    "sanksi_result_should_be": {"id": "Total BM Seharusnya", "en": "Total Import Duty Should Be"},
    "sanksi_result_shortage": {"id": "Kekurangan Pembayaran BM", "en": "Import Duty Shortage"},
    "sanksi_result_percentage": {"id": "Persentase Kekurangan", "en": "Shortage Percentage"},
    "sanksi_result_applicable_rate": {"id": "Tarif Denda Berlaku", "en": "Applicable Fine Rate"},
    "sanksi_result_total_fine": {"id": "Total Denda", "en": "Total Fine"},
    "temp_import_desc": {"id": "Simulasikan pembayaran untuk impor sementara. Masukkan total pungutan yang seharusnya dibayar jika impor biasa, dan jangka waktu penggunaan.", "en": "Simulate payments for temporary import. Enter the total levies that should be paid for a regular import, and the period of use."},
    "label_total_bm_should_be": {"id": "Total Bea Masuk Seharusnya (Rp)", "en": "Total Import Duty Should Be (IDR)"},
    "label_total_vat_should_be": {"id": "Total PPN Seharusnya (Rp)", "en": "Total VAT Should Be (IDR)"},
    "label_total_pph_should_be": {"id": "Total PPh 22 Seharusnya (Rp)", "en": "Total Income Tax 22 Should Be (IDR)"},
    "label_period_months": {"id": "Jangka Waktu (Bulan)", "en": "Period (Months)"},
    "btn_calculate_temp_import": {"id": "Hitung Impor Sementara", "en": "Calculate Temporary Import"},
    "temp_import_total_levies": {"id": "Total Pungutan Seharusnya", "en": "Total Levies Should Be"},
    "temp_import_monthly_payment": {"id": "Pembayaran per Bulan (2%)", "en": "Payment per Month (2%)"},
    "temp_import_total_payment": {"id": "Total Bayar Impor Sementara", "en": "Total Temporary Import Payment"},
    "import_flow_title": {"id": "Skema Alur Importasi Barang", "en": "Goods Importation Flow Scheme"},
    "export_flow_title": {"id": "Skema Alur Eksportasi Barang", "en": "Goods Exportation Flow Scheme"},
    "import_flow_content": {
        "id": `<div class="content-section"><h4>Tahap 1: Pra-Kedatangan Barang</h4><p>Sebelum barang tiba, importir harus menyiapkan dokumen (Invoice, Packing List, B/L atau AWB), memeriksa regulasi Lartas, dan bisa menunjuk PPJK.</p></div><div class="content-section"><h4>Tahap 2: Kedatangan & Pemberitahuan Awal</h4><p>Pihak pengangkut menyerahkan Inward Manifest (BC 1.1) kepada Bea Cukai. Berdasarkan dokumen, importir atau PPJK menyiapkan draf Pemberitahuan Impor Barang (PIB).</p></div><div class="content-section"><h4>Tahap 3: Pengajuan PIB dan Pembayaran</h4><p>PIB diajukan ke sistem Bea Cukai (CEISA), yang akan menghitung pungutan (BM & PDRI) dan menerbitkan Kode Billing. Importir wajib melunasi pembayaran sebelum proses selanjutnya.</p></div><div class="content-section"><h4>Tahap 4: Penentuan Jalur</h4><p>Setelah pembayaran, sistem menentukan jalur layanan: <strong>Jalur Hijau</strong> (langsung terbit SPPB), <strong>Jalur Kuning</strong> (pemeriksaan dokumen), atau <strong>Jalur Merah</strong> (pemeriksaan dokumen & fisik).</p></div><div class="content-section"><h4>Tahap 5 & 6: Persetujuan dan Pengeluaran</h4><p>Jika semua kewajiban terpenuhi, Bea Cukai menerbitkan Surat Persetujuan Pengeluaran Barang (SPPB). Dengan SPPB, importir dapat menyelesaikan biaya di pelabuhan dan mengeluarkan barang.</p></div><div class="content-section"><h4>Diagram Alur Visual</h4><div class="flowchart mt-8"><div class="flowchart-step"><div class="step-number">1</div><div class="step-title">Persiapan Dokumen & Izin</div><p class="step-desc">Invoice, Packing List, B/L, Izin Lartas</p></div><div class="flowchart-arrow"></div><div class="flowchart-step"><div class="step-number">2</div><div class="step-title">Barang Tiba & Pengajuan PIB</div><p class="step-desc">Pengangkut submit manifest, importir submit PIB ke CEISA</p></div><div class="flowchart-arrow"></div><div class="flowchart-step bg-blue-50 border-blue-200"><div class="step-number">3</div><div class="step-title">Pembayaran BM & PDRI</div><p class="step-desc">Sistem terbitkan Kode Billing, importir membayar via bank</p></div><div class="flowchart-arrow"></div><div class="flowchart-step"><div class="step-number">4</div><div class="step-title">Penentuan Jalur & Pemeriksaan</div><p class="step-desc">Hijau (Lulus), Kuning (Periksa Dokumen), Merah (Periksa Fisik)</p></div><div class="flowchart-arrow"></div><div class="flowchart-step bg-green-50 border-green-200"><div class="step-number">5</div><div class="step-title">Penerbitan SPPB</div><p class="step-desc">Surat Persetujuan Pengeluaran Barang</p></div><div class="flowchart-arrow"></div><div class="flowchart-step"><div class="step-number">6</div><div class="step-title">Pengeluaran Barang</div><p class="step-desc">Barang keluar dari pelabuhan/bandara</p></div></div></div>`,
        "en": `<div class="content-section"><h4>Step 1: Pre-Arrival of Goods</h4><p>Before the goods arrive, the importer must prepare documents (Invoice, Packing List, B/L or AWB), check Lartas regulations, and may appoint a PPJK.</p></div><div class="content-section"><h4>Step 2: Arrival & Initial Notification</h4><p>The carrier submits the Inward Manifest (BC 1.1) to Customs. Based on the documents, the importer or PPJK prepares a draft Import Declaration (PIB).</p></div><div class="content-section"><h4>Step 3: PIB Submission and Payment</h4><p>The PIB is submitted to the Customs system (CEISA), which will calculate the levies (Import Duty & PDRI) and issue a Billing Code. The importer must settle the payment before the next process.</p></div><div class="content-section"><h4>Step 4: Lane Determination</h4><p>After payment, the system determines the service lane: <strong>Green Lane</strong> (direct SPPB issuance), <strong>Yellow Lane</strong> (document check), or <strong>Red Lane</strong> (document & physical check).</p></div><div class="content-section"><h4>Step 5 & 6: Approval and Release</h4><p>If all obligations are met, Customs issues a Goods Release Approval Letter (SPPB). With the SPPB, the importer can settle port charges and release the goods.</p></div><div class="content-section"><h4>Visual Flowchart</h4><div class="flowchart mt-8"><div class="flowchart-step"><div class="step-number">1</div><div class="step-title">Document & Permit Preparation</div><p class="step-desc">Invoice, Packing List, B/L, Lartas Permit</p></div><div class="flowchart-arrow"></div><div class="flowchart-step"><div class="step-number">2</div><div class="step-title">Goods Arrival & PIB Submission</div><p class="step-desc">Carrier submits manifest, importer submits PIB to CEISA</p></div><div class="flowchart-arrow"></div><div class="flowchart-step bg-blue-50 border-blue-200"><div class="step-number">3</div><div class="step-title">Payment of Duties & Taxes</div><p class="step-desc">System issues Billing Code, importer pays via bank</p></div><div class="flowchart-arrow"></div><div class="flowchart-step"><div class="step-number">4</div><div class="step-title">Lane Determination & Inspection</div><p class="step-desc">Green (Clear), Yellow (Doc Check), Red (Physical Check)</p></div><div class="flowchart-arrow"></div><div class="flowchart-step bg-green-50 border-green-200"><div class="step-number">5</div><div class="step-title">SPPB Issuance</div><p class="step-desc">Goods Release Approval Letter</p></div><div class="flowchart-arrow"></div><div class="flowchart-step"><div class="step-number">6</div><div class="step-title">Goods Release</div><p class="step-desc">Goods exit the port/airport</p></div></div></div>`
    },
    "export_flow_content": {
        "id": `<div class="content-section"><h4>Tahap 1: Persiapan oleh Eksportir</h4><p>Sebelum pengajuan PEB, eksportir menyiapkan dokumen komersial (Invoice, Packing List), memeriksa regulasi ekspor, memesan ruang kargo, dan bisa menunjuk PPJK.</p></div><div class="content-section"><h4>Tahap 2: Pemberitahuan Pabean Ekspor (PEB)</h4><p>Eksportir atau PPJK membuat dan mengajukan draf PEB secara elektronik ke sistem Bea Cukai (CEISA). Jika barang dikenai Bea Keluar (BK), pembayaran wajib dilunasi.</p></div><div class="content-section"><h4>Tahap 3: Respons Bea Cukai</h4><p>Jika PEB benar dan tidak ada indikasi pelanggaran, sistem akan menerbitkan Nota Pelayanan Ekspor (NPE) sebagai persetujuan muat. Pemeriksaan fisik sangat jarang terjadi.</p></div><div class="content-section"><h4>Tahap 4: Pemasukan & Pemuatan Barang</h4><p>Setelah NPE terbit, barang dapat dimasukkan ke kawasan pabean (pelabuhan/bandara) dan dimuat ke sarana pengangkut (kapal/pesawat).</p></div><div class="content-section"><h4>Tahap 5: Penyelesaian Akhir</h4><p>Setelah keberangkatan, pengangkut menyerahkan Outward Manifest dan menerbitkan Bill of Lading (B/L) atau Air Waybill (AWB). Eksportir mengirimkan dokumen ini kepada pembeli untuk penyelesaian.</p></div><div class="content-section"><h4>Diagram Alur Visual</h4><div class="flowchart mt-8"><div class="flowchart-step"><div class="step-number">1</div><div class="step-title">Persiapan Dokumen & Kargo</div><p class="step-desc">Invoice, Packing List, Booking Space</p></div><div class="flowchart-arrow"></div><div class="flowchart-step"><div class="step-number">2</div><div class="step-title">Pengajuan PEB & Pembayaran BK</div><p class="step-desc">Submit PEB ke CEISA, bayar Bea Keluar jika ada</p></div><div class="flowchart-arrow"></div><div class="flowchart-step bg-green-50 border-green-200"><div class="step-number">3</div><div class="step-title">Penerbitan NPE</div><p class="step-desc">Nota Pelayanan Ekspor (Persetujuan Muat)</p></div><div class="flowchart-arrow"></div><div class="flowchart-step"><div class="step-number">4</div><div class="step-title">Pemuatan Barang</div><p class="step-desc">Barang masuk kawasan pabean dan dimuat ke kapal/pesawat</p></div><div class="flowchart-arrow"></div><div class="flowchart-step"><div class="step-number">5</div><div class="step-title">Penyelesaian</div><p class="step-desc">Kapal/pesawat berangkat, B/L atau AWB terbit</p></div></div></div>`,
        "en": `<div class="content-section"><h4>Step 1: Preparation by Exporter</h4><p>Before submitting the PEB, the exporter prepares commercial documents (Invoice, Packing List), checks export regulations, books cargo space, and may appoint a PPJK.</p></div><div class="content-section"><h4>Step 2: Export Declaration (PEB) Submission</h4><p>The exporter or PPJK creates and submits the draft PEB electronically to the Customs system (CEISA). If the goods are subject to Export Duty (BK), payment must be settled.</p></div><div class="content-section"><h4>Step 3: Customs Response</h4><p>If the PEB is correct and there are no indications of violations, the system will issue an Export Service Note (NPE) as loading approval. Physical inspection is very rare.</p></div><div class="content-section"><h4>Step 4: Entry & Loading of Goods</h4><p>After the NPE is issued, the goods can be brought into the customs area (port/airport) and loaded onto the carrier (ship/aircraft).</p></div><div class="content-section"><h4>Step 5: Final Settlement</h4><p>After departure, the carrier submits the Outward Manifest and issues a Bill of Lading (B/L) or Air Waybill (AWB). The exporter sends these documents to the buyer for settlement.</p></div><div class="content-section"><h4>Visual Flowchart</h4><div class="flowchart mt-8"><div class="flowchart-step"><div class="step-number">1</div><div class="step-title">Document & Cargo Preparation</div><p class="step-desc">Invoice, Packing List, Booking Space</p></div><div class="flowchart-arrow"></div><div class="flowchart-step"><div class="step-number">2</div><div class="step-title">PEB Submission & BK Payment</div><p class="step-desc">Submit PEB to CEISA, pay Export Duty if applicable</p></div><div class="flowchart-arrow"></div><div class="flowchart-step bg-green-50 border-green-200"><div class="step-number">3</div><div class="step-title">NPE Issuance</div><p class="step-desc">Export Service Note (Loading Approval)</p></div><div class="flowchart-arrow"></div><div class="flowchart-step"><div class="step-number">4</div><div class="step-title">Goods Loading</div><p class="step-desc">Goods enter customs area and are loaded onto ship/aircraft</p></div><div class="flowchart-arrow"></div><div class="flowchart-step"><div class="step-number">5</div><div class="step-title">Settlement</div><p class="step-desc">Ship/aircraft departs, B/L or AWB is issued</p></div></div></div>`
    },
    "quota_title": {"id": "Syarat Kuota Impor (Permendag 16-24 Tahun 2025)", "en": "Import Quota Requirements (Minister of Trade Reg. 16-24 of 2025)"},
    "quota_content": {
        "id": `<div class="content-section"><p>Pada pertengahan tahun 2025, Kementerian Perdagangan melakukan perombakan kebijakan impor dengan menerbitkan serangkaian peraturan baru (Permendag No. 16/2025 hingga 24/2025). Kebijakan ini mengakhiri era relaksasi impor di bawah Permendag 8/2024 dan kembali memberlakukan syarat <strong>Persetujuan Impor (PI)</strong> dan <strong>Laporan Surveyor (LS)</strong> untuk berbagai komoditas strategis. Tujuannya adalah untuk melindungi industri dalam negeri, menekan impor ilegal, dan menjaga neraca perdagangan.</p></div><div class="content-section"><h4>Syarat Umum Pengajuan Persetujuan Impor (PI)</h4><p>Secara umum, perusahaan yang ingin mendapatkan kuota impor (dalam bentuk PI) harus memenuhi persyaratan fundamental sebagai berikut:</p><ul><li><strong>Legalitas Usaha yang Valid:</strong> Memiliki Nomor Induk Berusaha (NIB) yang masih berlaku sebagai Angka Pengenal Importir (API).</li><li><strong>Izin Usaha Terkait:</strong> Memiliki izin usaha di sektornya masing-masing (misalnya, Izin Usaha Industri untuk importir produsen).</li><li><strong>Rencana Kebutuhan Impor:</strong> Mengajukan rencana kebutuhan barang impor untuk periode tertentu (biasanya satu tahun), yang didukung oleh data kapasitas produksi atau rencana penjualan.</li><li><strong>Laporan Realisasi Impor:</strong> Menyerahkan laporan realisasi impor dari periode sebelumnya sebagai bukti kepatuhan dan akuntabilitas.</li><li><strong>Dokumen Pendukung Lainnya:</strong> Tergantung komoditasnya, mungkin diperlukan dokumen tambahan seperti rekomendasi dari kementerian teknis (misal: Kemenperin).</li></ul></div><div class="content-section"><h4>Highlight Peraturan Spesifik (Contoh)</h4><p>Setiap peraturan memiliki fokusnya masing-masing:</p><ul><li><strong>Permendag 16/2025:</strong> Umumnya menjadi peraturan payung yang mengembalikan syarat PI untuk barang konsumsi yang sebelumnya dibebaskan, seperti <strong>Elektronik, Alas Kaki, Pakaian Jadi, dan Mainan Anak</strong>. Pengetatan ini bertujuan langsung untuk membendung serbuan produk impor jadi.</li><li><strong>Permendag Lainnya (Seri 17-24/2025):</strong> Peraturan-peraturan ini biasanya mengatur komoditas yang lebih spesifik dan krusial bagi industri, seperti:<ul><li>- <strong>Besi atau Baja:</strong> Memerlukan pertimbangan teknis dari Kemenperin terkait kebutuhan proyek dan industri nasional.</li><li>- <strong>Produk Tekstil dan Turunannya (TPT):</strong> Syarat PI diperketat untuk melindungi industri TPT dalam negeri dari hulu hingga hilir.</li><li>- <strong>Produk Kimia dan Bahan Berbahaya:</strong> Memerlukan verifikasi keamanan dan rekomendasi dari instansi terkait.</li></ul></li></ul></div><div class="content-section"><h4>Alur Proses Pengajuan</h4><p>Proses pengajuan PI dilakukan secara digital melalui portal <strong>INSW (Indonesia National Single Window)</strong> dan sistem <strong>SIINas (Sistem Informasi Industri Nasional)</strong>. Secara garis besar, alurnya adalah:</p><ol><li>Perusahaan mengajukan permohonan secara online dengan melengkapi data dan dokumen yang dipersyaratkan.</li><li>Sistem akan melakukan verifikasi awal. Jika komoditas memerlukan rekomendasi teknis, permohonan akan diteruskan ke kementerian terkait (misal: Kemenperin).</li><li>Setelah mendapatkan rekomendasi (jika perlu), Kementerian Perdagangan akan melakukan verifikasi akhir.</li><li>Jika semua syarat terpenuhi, Kemendag akan menerbitkan Persetujuan Impor (PI) yang berisi kuota jumlah dan jenis barang yang boleh diimpor.</li></ol></div>`,
        "en": `<div class="content-section"><p>In mid-2025, the Ministry of Trade overhauled its import policy by issuing a new series of regulations (Minister of Trade Regulation No. 16/2025 to 24/2025). This policy ends the era of import relaxation under Regulation 8/2024 and reinstates the requirements for <strong>Import Approval (PI)</strong> and <strong>Surveyor Report (LS)</strong> for various strategic commodities. The goal is to protect domestic industries, suppress illegal imports, and maintain the trade balance.</p></div><div class="content-section"><h4>General Requirements for Import Approval (PI) Application</h4><p>In general, companies wishing to obtain an import quota (in the form of a PI) must meet the following fundamental requirements:</p><ul><li><strong>Valid Business Legality:</strong> Possess a valid Business Identification Number (NIB) as an Importer Identification Number (API).</li><li><strong>Related Business Permits:</strong> Have business permits in their respective sectors (e.g., Industrial Business Permit for producer importers).</li><li><strong>Import Needs Plan:</strong> Submit a plan for imported goods needs for a specific period (usually one year), supported by production capacity data or sales plans.</li><li><strong>Import Realization Report:</strong> Submit the import realization report from the previous period as proof of compliance and accountability.</li><li><strong>Other Supporting Documents:</strong> Depending on the commodity, additional documents such as recommendations from technical ministries (e.g., Ministry of Industry) may be required.</li></ul></div><div class="content-section"><h4>Specific Regulation Highlights (Examples)</h4><p>Each regulation has its own focus:</p><ul><li><strong>Regulation 16/2025:</strong> Generally serves as an umbrella regulation that brings back the PI requirement for previously exempted consumer goods, such as <strong>Electronics, Footwear, Ready-made Garments, and Children's Toys</strong>. This tightening aims to directly curb the influx of finished imported products.</li><li><strong>Other Regulations (Series 17-24/2025):</strong> These regulations typically govern more specific and crucial commodities for industry, such as:<ul><li>- <strong>Iron or Steel:</strong> Requires technical considerations from the Ministry of Industry regarding national project and industrial needs.</li><li>- <strong>Textile and Textile Products (TPT):</strong> PI requirements are tightened to protect the domestic TPT industry from upstream to downstream.</li><li>- <strong>Chemical Products and Hazardous Materials:</strong> Require safety verification and recommendations from relevant agencies.</li></ul></li></ul></div><div class="content-section"><h4>Application Process Flow</h4><p>The PI application process is conducted digitally through the <strong>INSW (Indonesia National Single Window)</strong> portal and the <strong>SIINas (National Industrial Information System)</strong>. Broadly, the flow is as follows:</p><ol><li>The company submits an application online, completing the required data and documents.</li><li>The system performs an initial verification. If the commodity requires a technical recommendation, the application is forwarded to the relevant ministry (e.g., Ministry of Industry).</li><li>After obtaining the recommendation (if necessary), the Ministry of Trade will conduct a final verification.</li><li>If all requirements are met, the Ministry of Trade will issue an Import Approval (PI) containing the quota for the quantity and type of goods that can be imported.</li></ol></div>`
    },
    "facilities_title": {"id": "Analisis Fasilitas Kepabeanan", "en": "Customs Facilities Analysis"},
    "facilities_content": {
        "id": `<div class="content-section"><h3>Kawasan Berikat (KB)</h3><p>Tempat penimbunan berikat untuk menimbun barang impor dan/atau barang yang berasal dari tempat lain dalam daerah pabean guna diolah ataupun digabungkan, yang hasilnya terutama untuk diekspor.</p><div class="analysis-box"><strong>Analisis & Manfaat:</strong> Penangguhan Bea Masuk dan tidak dipungut PDRI atas impor bahan baku. Sangat membantu arus kas (cash flow) perusahaan manufaktur berorientasi ekspor.</div></div><div class="content-section"><h3>Gudang Berikat (GB)</h3><p>Tempat penimbunan berikat untuk menimbun barang impor, dapat disertai 1 atau lebih kegiatan berupa pengemasan/pengemasan kembali, penyortiran, penggabungan (kitting), pengepakan, penyetelan, pemotongan, atas barang-barang tertentu dalam jangka waktu tertentu untuk dikeluarkan kembali.</p><div class="analysis-box"><strong>Analisis & Manfaat:</strong> Sama seperti KB, mendapat penangguhan BM dan tidak dipungut PDRI. Cocok untuk industri yang butuh pusat distribusi logistik bahan baku impor di dekat lokasi industrinya.</div></div><div class="content-section"><h3>Pusat Logistik Berikat (PLB)</h3><p>Tempat penimbunan berikat untuk menimbun barang asal luar daerah pabean dan/atau barang yang berasal dari tempat lain dalam daerah pabean, dapat disertai 1 atau lebih kegiatan sederhana dalam jangka waktu tertentu untuk dikeluarkan kembali.</p><div class="analysis-box"><strong>Analisis & Manfaat:</strong> Menjadikan Indonesia sebagai hub logistik di Asia Pasifik. Importir dapat menimbun barang di PLB dengan penangguhan BM & PDRI, mendekatkan bahan baku dengan pabrik tanpa harus langsung melakukan proses impor penuh.</div></div><div class="content-section"><h3>Kawasan Bebas (Free Trade Zone)</h3><p>Suatu kawasan yang berada dalam wilayah hukum NKRI yang terpisah dari daerah pabean sehingga bebas dari pengenaan Bea Masuk, PPN, PPnBM, dan Cukai. Contoh: Batam, Bintan, Karimun.</p><div class="analysis-box"><strong>Analisis & Manfaat:</strong> Pemasukan barang konsumsi dari luar negeri ke Kawasan Bebas tidak dipungut BM & PDRI. Ini bertujuan untuk mendorong kegiatan ekonomi, pariwisata, dan perdagangan di wilayah perbatasan.</div></div><div class="content-section"><h3>Kemudahan Impor Tujuan Ekspor (KITE)</h3><p>Fasilitas pembebasan atau pengembalian Bea Masuk dan PPN tidak dipungut atas impor bahan baku untuk diolah, dirakit, atau dipasang pada barang lain dengan tujuan untuk diekspor.</p><div class="analysis-box"><strong>Analisis & Manfaat:</strong> Membuat harga produk ekspor lebih kompetitif. Berbeda dengan KB, perusahaan KITE tidak harus berada di kawasan khusus, memberikan fleksibilitas lokasi yang lebih tinggi.</div></div><div class="content-section"><h3>Mitra Utama Kepabeanan (MITA) & Authorized Economic Operator (AEO)</h3><p>Status pengakuan oleh DJBC kepada perusahaan dengan rekam jejak kepatuhan yang sangat baik. AEO memiliki standar lebih tinggi dan diakui secara internasional.</p><div class="analysis-box"><strong>Analisis & Manfaat:</strong> Mendapatkan perlakuan "karpet merah" berupa penyederhanaan prosedur, pemeriksaan fisik minim (jalur hijau), dan proses pengeluaran barang yang sangat cepat. Mengurangi waktu dan biaya logistik secara signifikan.</div></div><div class="content-section"><h3>Toko Bebas Bea (TBB / Duty Free Shop)</h3><p>Bangunan yang berlokasi di kawasan pabean di bandar udara internasional atau pelabuhan utama untuk menjual barang asal impor kepada orang yang bepergian ke luar negeri.</p><div class="analysis-box"><strong>Analisis & Manfaat:</strong> Memberikan fasilitas kepada wisatawan atau penumpang untuk membeli barang impor tanpa dikenai BM dan PDRI, sebagai salah satu daya tarik dalam industri pariwisata.</div></div><div class="content-section"><h3>Barang Penumpang & Barang Kiriman</h3><p>Fasilitas pembebasan bea masuk yang diberikan kepada individu. <strong>Barang Penumpang</strong> adalah barang pribadi yang dibawa dari luar negeri (saat ini de minimis USD 500 per orang). <strong>Barang Kiriman</strong> adalah barang yang dikirim melalui Penyelenggara Pos (misal: e-commerce) dengan de minimis saat ini USD 3 per kiriman.</p><div class="analysis-box"><strong>Analisis & Manfaat:</strong> Memudahkan masyarakat untuk membawa atau menerima barang dari luar negeri untuk keperluan pribadi dalam batas nilai tertentu tanpa melalui proses impor yang rumit.</div></div><div class="content-section"><h3>Pemanfaatan Free Trade Agreement (FTA)</h3><p>FTA adalah perjanjian perdagangan bebas antar negara yang memungkinkan importir mendapatkan keringanan atau pembebasan Bea Masuk (tarif preferensi). Untuk memanfaatkannya, importir harus membuktikan bahwa barangnya berasal dari negara mitra FTA.</p><h4>Kriteria Utama yang Harus Dipenuhi:</h4><ul><li><strong>Rules of Origin (Ketentuan Asal Barang):</strong> Barang harus memenuhi kriteria asal barang yang ditetapkan dalam perjanjian. Ini bisa berarti barang tersebut sepenuhnya diperoleh/diproduksi di negara mitra (Wholly Obtained), atau telah melalui proses pengerjaan yang substansial (Substantial Transformation) yang diukur dengan persentase kandungan lokal atau perubahan klasifikasi HS Code.</li><li><strong>Surat Keterangan Asal (SKA) / Certificate of Origin (COO):</strong> Importir wajib melampirkan SKA (Form D untuk ATIGA, Form E untuk ACFTA, dll.) yang valid. Dokumen ini diterbitkan oleh instansi berwenang di negara pengekspor dan menjadi bukti utama bahwa barang memenuhi Rules of Origin.</li><li><strong>Ketentuan Pengiriman Langsung (Direct Consignment):</strong> Barang harus dikirimkan secara langsung dari negara pengekspor ke Indonesia. Transit di negara lain diperbolehkan selama tidak ada proses pengerjaan lebih lanjut (hanya bongkar muat) dan tetap dalam pengawasan pabean di negara transit.</li><li><strong>Ketentuan Prosedural:</strong> Importir harus mencantumkan nomor referensi SKA dan kode fasilitas pada dokumen Pemberitahuan Impor Barang (PIB). Selain itu, importir wajib menyimpan semua dokumen terkait impor dengan skema FTA selama periode tertentu untuk keperluan audit atau verifikasi oleh DJBC di kemudian hari.</li></ul></div>`,
        "en": `<div class="content-section"><h3>Bonded Zone (KB)</h3><p>A bonded storage place to store imported goods and/or goods from other places within the customs area to be processed or combined, the results of which are primarily for export.</p><div class="analysis-box"><strong>Analysis & Benefits:</strong> Deferment of Import Duty and non-collection of Import-Related Taxes (PDRI) on raw material imports. Greatly helps the cash flow of export-oriented manufacturing companies.</div></div><div class="content-section"><h3>Bonded Warehouse (GB)</h3><p>A bonded storage place to store imported goods, which may be accompanied by one or more activities such as packaging/repackaging, sorting, kitting, packing, adjusting, or cutting of certain goods within a specific period to be re-issued.</p><div class="analysis-box"><strong>Analysis & Benefits:</strong> Same as KB, receives deferment of Import Duty and non-collection of PDRI. Suitable for industries that need a logistics distribution center for imported raw materials near their industrial sites.</div></div><div class="content-section"><h3>Bonded Logistics Center (PLB)</h3><p>A bonded storage place to store goods from outside the customs area and/or goods from other places within the customs area, which may be accompanied by one or more simple activities within a specific period to be re-issued.</p><div class="analysis-box"><strong>Analysis & Benefits:</strong> Makes Indonesia a logistics hub in the Asia Pacific. Importers can store goods in a PLB with deferment of Import Duty & PDRI, bringing raw materials closer to factories without having to go through the full import process immediately.</div></div><div class="content-section"><h3>Free Trade Zone</h3><p>An area within the jurisdiction of the Republic of Indonesia that is separate from the customs area, thus free from the imposition of Import Duty, VAT, Sales Tax on Luxury Goods, and Excise. Examples: Batam, Bintan, Karimun.</p><div class="analysis-box"><strong>Analysis & Benefits:</strong> The entry of consumer goods from abroad into a Free Trade Zone is not subject to Import Duty & PDRI. This aims to encourage economic activity, tourism, and trade in border areas.</div></div><div class="content-section"><h3>Import Facility for Export Purposes (KITE)</h3><p>A facility for the exemption or refund of Import Duty and non-collection of VAT on the import of raw materials to be processed, assembled, or installed on other goods for export purposes.</p><div class="analysis-box"><strong>Analysis & Benefits:</strong> Makes export product prices more competitive. Unlike KB, KITE companies do not have to be in a special zone, providing greater location flexibility.</div></div><div class="content-section"><h3>Main Customs Partner (MITA) & Authorized Economic Operator (AEO)</h3><p>A status of recognition by the Directorate General of Customs and Excise (DJBC) to companies with an excellent compliance track record. AEO has higher standards and is internationally recognized.</p><div class="analysis-box"><strong>Analysis & Benefits:</strong> Receives "red carpet" treatment in the form of simplified procedures, minimal physical inspection (green lane), and very fast goods release processes. Significantly reduces logistics time and costs.</div></div><div class="content-section"><h3>Duty-Free Shop (TBB)</h3><p>A building located in a customs area at an international airport or main seaport to sell imported goods to people traveling abroad.</p><div class="analysis-box"><strong>Analysis & Benefits:</strong> Provides a facility for tourists or passengers to buy imported goods without being subject to Import Duty and PDRI, as an attraction in the tourism industry.</div></div><div class="content-section"><h3>Passenger's Goods & Shipped Goods</h3><p>An import duty exemption facility granted to individuals. <strong>Passenger's Goods</strong> are personal items brought from abroad (currently with a de minimis of USD 500 per person). <strong>Shipped Goods</strong> are goods sent via Postal Operators (e.g., e-commerce) with a current de minimis of USD 3 per shipment.</p><div class="analysis-box"><strong>Analysis & Benefits:</strong> Makes it easier for people to bring or receive goods from abroad for personal use within a certain value limit without going through a complicated import process.</div></div><div class="content-section"><h3>Utilization of Free Trade Agreement (FTA)</h3><p>An FTA is a free trade agreement between countries that allows importers to obtain a reduction or exemption of Import Duty (preferential tariff). To utilize it, importers must prove that their goods originate from an FTA partner country.</p><h4>Main Criteria to be Met:</h4><ul><li><strong>Rules of Origin:</strong> The goods must meet the origin criteria set out in the agreement. This can mean the goods are wholly obtained/produced in the partner country, or have undergone substantial transformation, measured by local content percentage or a change in HS Code classification.</li><li><strong>Certificate of Origin (COO):</strong> Importers must attach a valid COO (Form D for ATIGA, Form E for ACFTA, etc.). This document is issued by the competent authority in the exporting country and serves as the primary proof that the goods meet the Rules of Origin.</li><li><strong>Direct Consignment:</strong> The goods must be shipped directly from the exporting country to Indonesia. Transit in another country is allowed as long as no further processing occurs (only unloading/loading) and it remains under customs supervision in the transit country.</li><li><strong>Procedural Provisions:</strong> Importers must state the COO reference number and facility code on the Import Declaration (PIB) document. Additionally, importers are required to keep all documents related to the FTA scheme import for a certain period for audit or verification purposes by DJBC later on.</li></ul></div>`
    },
    "case_studies_title": {"id": "Studi Kasus Kepabeanan", "en": "Customs Case Studies"},
    "case_studies_content": {
        "id": `<div class="content-section"><h3>Kasus 1: Impor Multi-Item dengan BM Anti Dumping</h3><p>PT ABC mengimpor 2 jenis barang dari negara X. Perusahaan memiliki API. Salah satu barang dikenakan BMAD.</p><ul><li>Total Insurance: Rp 2.000.000, Total Freight: Rp 15.000.000</li><li>Barang 1: 100 unit Komponen Mesin, Cost: Rp 200.000.000, Tarif BM: 10%, Tarif BMAD: 0%</li><li>Barang 2: 50 unit Plat Baja, Cost: Rp 50.000.000, Tarif BM: 5%, Tarif BMAD: 15%</li></ul><div class="analysis-box"><strong>Perhitungan:</strong> Kalkulator akan mengalokasikan Insurance & Freight secara proporsional, lalu menghitung BM dan BMAD untuk setiap item. Hasilnya akan menunjukkan total pungutan yang harus dibayar, dengan BM dan BMAD sebagai komponen terpisah.</div></div><div class="content-section"><h3>Kasus 2: Sanksi Denda Akibat Kesalahan Nilai Pabean</h3><p>Setelah melakukan impor pada Kasus 1, PT ABC diaudit oleh DJBC dan ditemukan bahwa Nilai Pabean untuk Komponen Mesin seharusnya lebih tinggi.</p><ul><li>BM yang sudah dibayar (total): Rp 22.100.000</li><li>Hasil Audit: Nilai Pabean Komponen Mesin seharusnya Rp 220.000.000 (bukan Rp 203.400.000).</li><li>BM Seharusnya: (Rp 220.000.000 * 10%) + BM Plat Baja = Rp 22.000.000 + Rp 2.600.000 = Rp 24.600.000</li><li>Kekurangan Bayar: Rp 2.500.000</li></ul><div class="analysis-box"><strong>Perhitungan Sanksi:</strong> Kalkulator akan menghitung persentase kekurangan (Rp 2.5jt / Rp 22.1jt = 11,3%). Karena di bawah 25%, denda untuk importir umum adalah 100% dari kekurangan, yaitu Rp 2.500.000.</div></div><div class="content-section"><h3>Kasus 3: Sengketa Klasifikasi Barang (HS Code)</h3><p>PT DEF mengimpor "Mesin Pengolah Data Otomatis" dan memberitahukannya dalam PIB dengan HS Code 8471.50.00 (Tarif BM 0%). Setelah diperiksa, Pejabat Bea Cukai menetapkan bahwa barang tersebut lebih tepat diklasifikasikan sebagai "Peralatan Telekomunikasi" dengan HS Code 8517.62.00 (Tarif BM 5%).</p><ul><li>Nilai Pabean Barang: Rp 500.000.000</li><li>BM yang dibayar (menurut importir): Rp 500.000.000 * 0% = Rp 0</li><li>BM Seharusnya (menurut DJBC): Rp 500.000.000 * 5% = Rp 25.000.000</li><li>Kekurangan Bayar BM: Rp 25.000.000</li></ul><div class="analysis-box"><strong>Konsekuensi:</strong> PT DEF harus membayar kekurangan BM sebesar Rp 25.000.000. Selain itu, karena terjadi kesalahan pemberitahuan yang menyebabkan kekurangan bayar, PT DEF juga akan dikenakan sanksi administrasi berupa denda sesuai ketentuan yang berlaku.</div></div>`,
        "en": `<div class="content-section"><h3>Case 1: Multi-Item Import with Anti-Dumping Duty</h3><p>PT ABC imports 2 types of goods from country X. The company has an Importer ID (API). One of the goods is subject to Anti-Dumping Duty (BMAD).</p><ul><li>Total Insurance: IDR 2,000,000, Total Freight: IDR 15,000,000</li><li>Item 1: 100 units of Machine Components, Cost: IDR 200,000,000, Import Duty Tariff: 10%, BMAD Tariff: 0%</li><li>Item 2: 50 units of Steel Plates, Cost: IDR 50,000,000, Import Duty Tariff: 5%, BMAD Tariff: 15%</li></ul><div class="analysis-box"><strong>Calculation:</strong> The calculator will proportionally allocate Insurance & Freight, then calculate the Import Duty and BMAD for each item. The result will show the total levies to be paid, with Import Duty and BMAD as separate components.</div></div><div class="content-section"><h3>Case 2: Penalty for Error in Customs Value</h3><p>After the import in Case 1, PT ABC was audited by Customs (DJBC) and it was found that the Customs Value for the Machine Components should have been higher.</p><ul><li>Import Duty already paid (total): IDR 22,100,000</li><li>Audit Result: The Customs Value of Machine Components should be IDR 220,000,000 (not IDR 203,400,000).</li><li>Correct Import Duty: (IDR 220,000,000 * 10%) + Steel Plate Import Duty = IDR 22,000,000 + IDR 2,600,000 = IDR 24,600,000</li><li>Underpayment: IDR 2,500,000</li></ul><div class="analysis-box"><strong>Sanction Calculation:</strong> The calculator will compute the shortage percentage (IDR 2.5m / IDR 22.1m = 11.3%). Since it is below 25%, the fine for a general importer is 100% of the shortage, which is IDR 2,500,000.</div></div><div class="content-section"><h3>Case 3: Goods Classification (HS Code) Dispute</h3><p>PT DEF imports an "Automatic Data Processing Machine" and declares it in the PIB with HS Code 8471.50.00 (Import Duty Tariff 0%). Upon inspection, the Customs Officer determines that the item is more appropriately classified as "Telecommunication Equipment" under HS Code 8517.62.00 (Import Duty Tariff 5%).</p><ul><li>Customs Value of Goods: IDR 500,000,000</li><li>Import Duty paid (according to importer): IDR 500,000,000 * 0% = IDR 0</li><li>Correct Import Duty (according to DJBC): IDR 500,000,000 * 5% = IDR 25,000,000</li><li>Import Duty Underpayment: IDR 25,000,000</li></ul><div class="analysis-box"><strong>Consequence:</strong> PT DEF must pay the duty shortage of IDR 25,000,000. Additionally, due to the declaration error that led to the underpayment, PT DEF will also be subject to administrative sanctions in the form of a fine according to the applicable regulations.</div></div>`
    },
    "regulations_title": {"id": "Pusat Peraturan", "en": "Regulation Center"},
    "regulations_content": {
        "id": `<div class="content-section"><h4>Undang-Undang</h4><ul class="list-disc list-inside text-blue-600"><li><a href="https://peraturan.bpk.go.id/Details/39267/uu-no-17-tahun-2006" target="_blank" rel="noopener noreferrer" class="hover:underline">UU No. 17 Tahun 2006 (Kepabeanan)</a></li><li><a href="https://jdih.kemenkeu.go.id/in/dokumen/lihat/439ec12d-3715-4b73-929a-25b411a3b934" target="_blank" rel="noopener noreferrer" class="hover:underline">UU No. 7 Tahun 2021 (Harmonisasi Peraturan Perpajakan)</a></li></ul></div><div class="content-section"><h4>Peraturan Menteri Keuangan (PMK)</h4><ul class="list-disc list-inside text-blue-600"><li><a href="https://jdih.kemenkeu.go.id/in/dokumen/lihat/a1d95324-42b7-4c74-8b09-b42023223f05" target="_blank" rel="noopener noreferrer" class="hover:underline">PMK tentang Nilai Pabean</a></li><li><a href="https://jdih.kemenkeu.go.id/in/dokumen/lihat/98b79237-0245-4231-90c7-013143c16a6a" target="_blank" rel="noopener noreferrer" class="hover:underline">PMK tentang Impor Sementara</a></li><li><a href="https://jdih.kemenkeu.go.id/in/dokumen/lihat/a0101083-d343-4e00-9c2b-871d8717906d" target="_blank" rel="noopener noreferrer" class="hover:underline">PMK tentang Kawasan Berikat</a></li><li><a href="https://jdih.kemenkeu.go.id/in/dokumen/lihat/98d0228d-d790-482f-870f-96a84c8a29a4" target="_blank" rel="noopener noreferrer" class="hover:underline">PMK tentang Pusat Logistik Berikat</a></li><li><a href="https://jdih.kemenkeu.go.id/in/dokumen/lihat/32338b2d-4537-4d6d-8533-8947690623a8" target="_blank" rel="noopener noreferrer" class="hover:underline">PMK tentang KITE</a></li><li><a href="https://jdih.kemenkeu.go.id/in/dokumen/lihat/cda49f69-74d7-4632-841f-13a8d1163473" target="_blank" rel="noopener noreferrer" class="hover:underline">PMK tentang Sanksi Administrasi Denda</a></li></ul></div><div class="content-section"><h4>Peraturan Menteri Perdagangan (Permendag)</h4><ul class="list-disc list-inside text-blue-600"><li><a href="https://jdih.kemendag.go.id/peraturan/detail/2932/1" target="_blank" rel="noopener noreferrer" class="hover:underline">Permendag tentang Kebijakan dan Pengaturan Impor</a></li><li><a href="https://jdih.kemendag.go.id/peraturan/detail/1628/1" target="_blank" rel="noopener noreferrer" class="hover:underline">Permendag tentang Ketentuan Impor Besi atau Baja</a></li></ul></div><div class="content-section"><h4>Peraturan Direktur Jenderal Bea dan Cukai (Perdirjen)</h4><ul class="list-disc list-inside text-blue-600"><li><a href="https://www.beacukai.go.id/arsip/peraturan/2018/peraturan-direktur-jenderal-bea-dan-cukai-nomor-per-19bc2018.html" target="_blank" rel="noopener noreferrer" class="hover:underline">Perdirjen tentang Petunjuk Pelaksanaan Kawasan Berikat</a></li><li><a href="https://www.beacukai.go.id/arsip/peraturan/2018/peraturan-direktur-jenderal-bea-dan-cukai-nomor-per-20bc2018.html" target="_blank" rel="noopener noreferrer" class="hover:underline">Perdirjen tentang Tata Laksana Pemasukan dan Pengeluaran Barang ke dan dari PLB</a></li></ul></div>`,
        "en": `<div class="content-section"><h4>Laws</h4><ul class="list-disc list-inside text-blue-600"><li><a href="https://peraturan.bpk.go.id/Details/39267/uu-no-17-tahun-2006" target="_blank" rel="noopener noreferrer" class="hover:underline">Law No. 17 of 2006 (Customs)</a></li><li><a href="https://jdih.kemenkeu.go.id/in/dokumen/lihat/439ec12d-3715-4b73-929a-25b411a3b934" target="_blank" rel="noopener noreferrer" class="hover:underline">Law No. 7 of 2021 (Harmonization of Tax Regulations)</a></li></ul></div><div class="content-section"><h4>Minister of Finance Regulations (PMK)</h4><ul class="list-disc list-inside text-blue-600"><li><a href="https://jdih.kemenkeu.go.id/in/dokumen/lihat/a1d95324-42b7-4c74-8b09-b42023223f05" target="_blank" rel="noopener noreferrer" class="hover:underline">PMK on Customs Value</a></li><li><a href="https://jdih.kemenkeu.go.id/in/dokumen/lihat/98b79237-0245-4231-90c7-013143c16a6a" target="_blank" rel="noopener noreferrer" class="hover:underline">PMK on Temporary Import</a></li><li><a href="https://jdih.kemenkeu.go.id/in/dokumen/lihat/a0101083-d343-4e00-9c2b-871d8717906d" target="_blank" rel="noopener noreferrer" class="hover:underline">PMK on Bonded Zones</a></li><li><a href="https://jdih.kemenkeu.go.id/in/dokumen/lihat/98d0228d-d790-482f-870f-96a84c8a29a4" target="_blank" rel="noopener noreferrer" class="hover:underline">PMK on Bonded Logistics Centers</a></li><li><a href="https://jdih.kemenkeu.go.id/in/dokumen/lihat/32338b2d-4537-4d6d-8533-8947690623a8" target="_blank" rel="noopener noreferrer" class="hover:underline">PMK on KITE</a></li><li><a href="https://jdih.kemenkeu.go.id/in/dokumen/lihat/cda49f69-74d7-4632-841f-13a8d1163473" target="_blank" rel="noopener noreferrer" class="hover:underline">PMK on Administrative Fine Sanctions</a></li></ul></div><div class="content-section"><h4>Minister of Trade Regulations (Permendag)</h4><ul class="list-disc list-inside text-blue-600"><li><a href="https://jdih.kemendag.go.id/peraturan/detail/2932/1" target="_blank" rel="noopener noreferrer" class="hover:underline">Permendag on Import Policy and Regulation</a></li><li><a href="https://jdih.kemendag.go.id/peraturan/detail/1628/1" target="_blank" rel="noopener noreferrer" class="hover:underline">Permendag on Import Provisions for Iron or Steel</a></li></ul></div><div class="content-section"><h4>Director General of Customs and Excise Regulations (Perdirjen)</h4><ul class="list-disc list-inside text-blue-600"><li><a href="https://www.beacukai.go.id/arsip/peraturan/2018/peraturan-direktur-jenderal-bea-dan-cukai-nomor-per-19bc2018.html" target="_blank" rel="noopener noreferrer" class="hover:underline">Perdirjen on Implementing Instructions for Bonded Zones</a></li><li><a href="https://www.beacukai.go.id/arsip/peraturan/2018/peraturan-direktur-jenderal-bea-dan-cukai-nomor-per-20bc2018.html" target="_blank" rel="noopener noreferrer" class="hover:underline">Perdirjen on Procedures for Entry and Exit of Goods to and from PLB</a></li></ul></div>`
    },
    "glossary_title": {"id": "Glosarium Istilah Kepabeanan", "en": "Glossary of Customs Terms"},
    "glossary_content": {
        "id": `<div class="glossary-term"><h4>Angka Pengenal Importir (API)</h4><p>Tanda pengenal yang wajib dimiliki oleh setiap perusahaan yang melakukan kegiatan impor barang.</p></div><div class="glossary-term"><h4>Daerah Pabean</h4><p>Wilayah Republik Indonesia yang meliputi darat, perairan, dan ruang udara di atasnya, serta tempat-tempat tertentu di Zona Ekonomi Eksklusif dan landas kontinen yang di dalamnya berlaku Undang-Undang Kepabeanan.</p></div><div class="glossary-term"><h4>De Minimis Value</h4><p>Batas nilai pabean atas barang kiriman yang diberikan pembebasan bea masuk. Saat ini ditetapkan sebesar FOB USD 3 per kiriman.</p></div><div class="glossary-term"><h4>HS Code (Harmonized System Code)</h4><p>Sistem klasifikasi barang yang digunakan secara internasional untuk mengidentifikasi produk. HS Code menentukan besaran tarif bea masuk suatu barang.</p></div><div class="glossary-term"><h4>Jalur Merah, Kuning, Hijau</h4><p>Sistem manajemen risiko DJBC. <strong>Jalur Merah:</strong> Pemeriksaan fisik dan dokumen. <strong>Jalur Kuning:</strong> Hanya pemeriksaan dokumen. <strong>Jalur Hijau:</strong> Tidak ada pemeriksaan, barang dapat langsung keluar.</p></div><div class="glossary-term"><h4>Kawasan Pabean</h4><p>Kawasan dengan batas-batas tertentu di pelabuhan laut, bandar udara, atau tempat lain yang ditetapkan untuk lalu lintas barang yang sepenuhnya berada di bawah pengawasan DJBC.</p></div><div class="glossary-term"><h4>Lartas (Larangan dan Pembatasan)</h4><p>Barang-barang yang impornya dilarang atau dibatasi dan memerlukan perizinan khusus dari instansi teknis terkait sebelum dapat diimpor.</p></div><div class="glossary-term"><h4>Nilai Pabean</h4><p>Nilai transaksi dari barang impor yang digunakan sebagai dasar untuk menghitung bea masuk. Umumnya menggunakan metode CIF (Cost, Insurance, Freight).</p></div><div class="glossary-term"><h4>Nota Pembetulan (Notul)</h4><p>Dokumen yang diterbitkan oleh Pejabat Bea Cukai untuk mengoreksi data pada PIB yang menyebabkan kekurangan atau kelebihan pembayaran pungutan negara.</p></div><div class="glossary-term"><h4>Pemberitahuan Ekspor Barang (PEB)</h4><p>Dokumen pabean yang digunakan untuk memberitahukan pelaksanaan ekspor barang.</p></div><div class="glossary-term"><h4>Pemberitahuan Impor Barang (PIB)</h4><p>Dokumen pemberitahuan yang diajukan oleh importir kepada kantor bea cukai atas barang yang diimpor, berisi detail barang, nilai, dan data lain yang menjadi dasar perhitungan pungutan negara.</p></div>`,
        "en": `<div class="glossary-term"><h4>Importer Identification Number (API)</h4><p>An identification number that must be owned by every company that carries out import activities.</p></div><div class="glossary-term"><h4>Customs Area</h4><p>The territory of the Republic of Indonesia which includes land, waters, and the airspace above it, as well as certain places in the Exclusive Economic Zone and the continental shelf where the Customs Law applies.</p></div><div class="glossary-term"><h4>De Minimis Value</h4><p>The customs value limit for shipped goods that are granted import duty exemption. Currently set at FOB USD 3 per shipment.</p></div><div class="glossary-term"><h4>HS Code (Harmonized System Code)</h4><p>An internationally used goods classification system to identify products. The HS Code determines the import duty tariff for a good.</p></div><div class="glossary-term"><h4>Red, Yellow, Green Lanes</h4><p>DJBC's risk management system. <strong>Red Lane:</strong> Physical and document inspection. <strong>Yellow Lane:</strong> Document inspection only. <strong>Green Lane:</strong> No inspection, goods can be released immediately.</p></div><div class="glossary-term"><h4>Customs Zone</h4><p>An area with specific boundaries at a seaport, airport, or other designated place for the traffic of goods that is entirely under the supervision of DJBC.</p></div><div class="glossary-term"><h4>Prohibitions and Restrictions (Lartas)</h4><p>Goods whose import is prohibited or restricted and require special permits from relevant technical agencies before they can be imported.</p></div><div class="glossary-term"><h4>Customs Value</h4><p>The transaction value of imported goods used as the basis for calculating import duty. Generally uses the CIF (Cost, Insurance, Freight) method.</p></div><div class="glossary-term"><h4>Correction Note (Notul)</h4><p>A document issued by a Customs Officer to correct data in the PIB that causes an underpayment or overpayment of state levies.</p></div><div class="glossary-term"><h4>Export Declaration (PEB)</h4><p>A customs document used to declare the implementation of an export of goods.</p></div><div class="glossary-term"><h4>Import Declaration (PIB)</h4><p>A declaration document submitted by an importer to the customs office for imported goods, containing details of the goods, value, and other data that form the basis for calculating state levies.</p></div>`
    },
    "quiz_title": {"id": "Kuis Pabean", "en": "Customs Quiz"},
    "quiz_intro": {"id": "Uji pengetahuan Anda tentang berbagai aspek kepabeanan. Pilih salah satu kategori di bawah ini untuk memulai.", "en": "Test your knowledge on various customs aspects. Choose a category below to start."},
    "btn_back_to_menu": {"id": "Kembali ke Menu", "en": "Back to Menu"},
    "quiz_result_title": {"id": "Hasil Kuis", "en": "Quiz Results"},
    "quiz_score_label": {"id": "Skor Anda:", "en": "Your Score:"},
    "btn_submit_quiz": {"id": "Kumpulkan Jawaban", "en": "Submit Answers"},
    "quiz_cat_1_title": {"id": "UU Kepabeanan", "en": "Customs Law"},
    "quiz_cat_1_desc": {"id": "60 Soal Pilihan Ganda mengenai UU No. 17 Tahun 2006.", "en": "60 Multiple Choice questions about Law No. 17 of 2006."},
    "quiz_cat_2_title": {"id": "Pengeluaran Barang Impor", "en": "Release of Imported Goods"},
    "quiz_cat_2_desc": {"id": "60 Soal Pilihan Ganda mengenai PMK 190/2022 & PER-2/BC/2023.", "en": "60 Multiple Choice questions about PMK 190/2022 & PER-2/BC/2023."},
    "quiz_cat_3_title": {"id": "Nilai Pabean", "en": "Customs Value"},
    "quiz_cat_3_desc": {"id": "60 Soal Pilihan Ganda mengenai PMK 144/2022.", "en": "60 Multiple Choice questions about PMK 144/2022."},
    "quiz_cat_4_title": {"id": "Impor Barang Kiriman", "en": "Import of Shipped Goods"},
    "quiz_cat_4_desc": {"id": "60 Soal Pilihan Ganda mengenai impor melalui PJT.", "en": "60 Multiple Choice questions about import via couriers."},
    "quiz_cat_5_title": {"id": "Tatalaksana Ekspor", "en": "Export Procedures"},
    "quiz_cat_5_desc": {"id": "60 Soal Pilihan Ganda mengenai PMK 155/2022.", "en": "60 Multiple Choice questions about PMK 155/2022."},
    "quiz_cat_6_title": {"id": "Tempat Penimbunan Berikat", "en": "Bonded Storage Places"},
    "quiz_cat_6_desc": {"id": "60 Soal Pilihan Ganda mengenai KB, GB, PLB, dll.", "en": "60 Multiple Choice questions about KB, GB, PLB, etc."},
    "quiz_cat_7_title": {"id": "Fasilitas Kepabeanan", "en": "Customs Facilities"},
    "quiz_cat_7_desc": {"id": "60 Soal Pilihan Ganda mengenai KITE, AEO, MITA, dll.", "en": "60 Multiple Choice questions about KITE, AEO, MITA, etc."},
    "quiz_cat_8_title": {"id": "Soal Hitungan", "en": "Calculation Problems"},
    "quiz_cat_8_desc": {"id": "10 Soal Esai mengenai perhitungan nilai pabean, BM, dan PDRI.", "en": "10 Essay problems on calculating customs value, duties, and taxes."},
    "quiz_cat_9_title": {"id": "Klasifikasi Barang", "en": "Goods Classification"},
    "quiz_cat_9_desc": {"id": "10 Soal Esai mengenai penetapan HS Code.", "en": "10 Essay problems on determining HS Code."},
    "footer_created_by": {"id": "Dibuat oleh Muhammad Faiz Lubis", "en": "Created by Muhammad Faiz Lubis"},
    "footer_desc": {"id": "Portal ini adalah proyek portofolio untuk mendemonstrasikan keahlian dalam pengembangan web dan pengetahuan kepabeanan.", "en": "This portal is a portfolio project to demonstrate web development and customs knowledge expertise."},
    "footer_contact": {"id": "Hubungi untuk Konsultasi", "en": "Contact for Consultation"}
};

// --- QUIZ DATA ---
const quizData = {
    cat1: {
        type: 'mcq',
        questions: [
            { q: "Wilayah Indonesia yang di dalamnya berlaku UU Kepabeanan disebut...", a: ["Daerah Pabean", "Kawasan Pabean", "Zona Ekonomi Eksklusif", "Landas Kontinen"], correct: 0 },
            { q: "Audit Kepabeanan dilakukan oleh...", a: ["Pejabat Bea dan Cukai", "Direktorat Jenderal Pajak", "Unit Audit Internal DJBC", "Auditor Eksternal"], correct: 2 },
        ]
    },
    cat2: {
        type: 'mcq',
        questions: [
            { q: "Dokumen yang digunakan untuk pengeluaran barang impor untuk dipakai adalah...", a: ["PEB", "PIB", "BC 2.3", "BC 4.0"], correct: 1 },
        ]
    },
    cat3: {
        type: 'mcq',
        questions: [
            { q: "Metode utama yang digunakan untuk menetapkan nilai pabean adalah...", a: ["Metode Deduksi", "Metode Komputasi", "Nilai Transaksi", "Metode Fallback"], correct: 2 },
        ]
    },
    cat4: {
        type: 'mcq',
        questions: [
            { q: "Batas nilai pembebasan bea masuk untuk barang kiriman per kiriman saat ini adalah...", a: ["FOB USD 3", "FOB USD 75", "FOB USD 500", "FOB USD 1500"], correct: 0 },
        ]
    },
    cat5: {
        type: 'mcq',
        questions: [
            { q: "Pemberitahuan pabean ekspor disampaikan melalui dokumen...", a: ["PIB", "PEB", "BC 3.0", "Nota Pelayanan Ekspor"], correct: 1 },
        ]
    },
    cat6: {
        type: 'mcq',
        questions: [
            { q: "Tempat penimbunan untuk mengolah barang yang hasilnya terutama untuk diekspor adalah...", a: ["Gudang Berikat", "Pusat Logistik Berikat", "Kawasan Berikat", "Toko Bebas Bea"], correct: 2 },
        ]
    },
    cat7: {
        type: 'mcq',
        questions: [
            { q: "Fasilitas pembebasan bea masuk atas impor bahan baku untuk tujuan ekspor dikenal sebagai...", a: ["AEO", "MITA", "KITE", "Kawasan Bebas"], correct: 2 },
        ]
    },
    cat8: {
        type: 'essay',
        questions: [
            { q: "Importir PT. Jaya mengimpor 100 unit mesin dari Jerman dengan harga FOB EUR 1,000 per unit. Biaya asuransi adalah 0.5% dari nilai FOB dan biaya angkut (freight) adalah EUR 2,000. Kurs yang ditetapkan Menteri Keuangan adalah 1 EUR = Rp 17,000. Tarif Bea Masuk adalah 10%. Hitunglah Nilai Pabean dan Bea Masuk yang harus dibayar!", modelAnswer: "1. Hitung Total FOB: 100 unit * EUR 1,000 = EUR 100,000.\n2. Hitung Insurance: 0.5% * EUR 100,000 = EUR 500.\n3. Hitung CIF (Cost, Insurance, Freight): EUR 100,000 + EUR 500 + EUR 2,000 = EUR 102,500.\n4. Hitung Nilai Pabean (NP): EUR 102,500 * Rp 17,000 = Rp 1,742,500,000.\n5. Hitung Bea Masuk (BM): 10% * Rp 1,742,500,000 = Rp 174,250,000. Pembulatan PIB: Rp 174,250,000." },
        ]
    },
    cat9: {
        type: 'essay',
        questions: [
            { q: "Sebuah perusahaan mengimpor 'smartphone' yang memiliki fungsi telepon, akses internet, kamera, dan GPS. Jelaskan pertimbangan Anda dalam menetapkan HS Code untuk barang tersebut dan sebutkan pos yang paling mungkin.", modelAnswer: "Berdasarkan Ketentuan Umum Menginterpretasi Harmonized System (KUMHS) nomor 3(a), pos yang memberikan uraian paling spesifik harus lebih diutamakan. Namun, smartphone adalah barang multifungsi. KUMHS 3(c) menyatakan jika tidak dapat diklasifikasikan dengan 3(a) atau 3(b), barang harus diklasifikasikan dalam pos yang muncul terakhir dalam urutan numerik di antara pos-pos yang punya pertimbangan yang sama. Fungsi utamanya adalah sebagai 'Aparatus telepon untuk jaringan seluler'. Oleh karena itu, HS Code yang paling mungkin adalah 8517.13.00 (Telepon untuk jaringan seluler atau untuk jaringan nirkabel lainnya - Telepon pintar)." },
        ]
    }
};

// --- NAVIGATION ---
/**
 * Handles page switching logic.
 * @param {string} pageId The ID of the page content div to show.
 * @param {HTMLElement} clickedLink The navigation link element that was clicked.
 */
function showPage(pageId, clickedLink) {
    // Hide all pages by removing the 'active' class
    document.querySelectorAll('.page-content').forEach(page => {
        page.classList.remove('active');
    });

    // Find and show the target page by adding the 'active' class
    const targetPage = document.getElementById(pageId);
    if (targetPage) {
        targetPage.classList.add('active');
    } else {
        // Log an error if the page div doesn't exist, to help with debugging
        console.error(`Page content with id '${pageId}' not found.`);
        return; 
    }

    // Deactivate all navigation links
    document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('active');
    });

    // Activate the specific link that was clicked
    if (clickedLink) {
        clickedLink.classList.add('active');
    }
    
    // If navigating to the quiz page, reset its view to the main menu
    if (pageId === 'kuis') {
        returnToQuizMenu();
    }
}


// --- LANGUAGE SWITCHER ---
function setLanguage(lang) {
    document.documentElement.lang = lang;
    document.querySelectorAll('[data-lang-key]').forEach(el => {
        const key = el.dataset.langKey;
        if (translations[key] && translations[key][lang]) {
            // Check if the value is an object (for content blocks) or string
            if (typeof translations[key][lang] === 'string') {
                el.innerHTML = translations[key][lang];
            } else if (typeof translations[key] === 'object' && translations[key][lang]) {
                // Handle content blocks which are objects themselves
                el.innerHTML = translations[key][lang];
            }
        }
    });
    if (lang === 'id') {
        document.getElementById('lang-id').classList.add('active');
        document.getElementById('lang-en').classList.remove('active');
    } else {
        document.getElementById('lang-en').classList.add('active');
        document.getElementById('lang-id').classList.remove('active');
    }
    // Re-populate quiz menu on language change
    populateQuizMenu();
}


// --- CALCULATOR LOGIC (Existing) ---
document.addEventListener('DOMContentLoaded', function() {
    const itemsContainer = document.getElementById('items-container');
    const addItemBtn = document.getElementById('add-item-btn');

    function updateSerialNumbers() {
        const rows = itemsContainer.querySelectorAll('.item-row');
        rows.forEach((row, index) => {
            row.querySelector('.serial-number').textContent = index + 1;
        });
    }

    function createItemRow() {
        const itemRow = document.createElement('div');
        itemRow.className = 'item-row border-b md:border-none md:grid md:grid-cols-12 gap-4 p-4 md:p-2';
        itemRow.innerHTML = `
            <div class="font-semibold md:col-span-1 flex items-center">
                <span class="serial-number mr-2"></span>
                <span class="md:hidden font-bold">Barang</span>
            </div>
            <div class="md:col-span-5">
                <label class="block text-sm font-medium text-gray-700 mb-1 md:hidden">Cost Barang (Rp)</label>
                <input type="text" class="input-field number-input item-cost" placeholder="15.000.000" inputmode="numeric">
            </div>
            <div class="md:col-span-2">
                <label class="block text-sm font-medium text-gray-700 mb-1 md:hidden">Tarif BM (%)</label>
                <input type="number" class="input-field item-bm-tarif" placeholder="7.5" inputmode="decimal">
            </div>
            <div class="md:col-span-2">
                <label class="block text-sm font-medium text-gray-700 mb-1 md:hidden">Tarif BMAD (%)</label>
                <input type="number" class="input-field item-bmad-tarif" placeholder="0" inputmode="decimal">
            </div>
            <div class="md:col-span-2 mt-2 md:mt-0">
                <button class="btn btn-danger w-full md:w-auto remove-item-btn"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1 md:mr-0" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 10a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H4.75A.75.75 0 014 10z" clip-rule="evenodd" /></svg><span class="md:hidden">Hapus Barang</span></button>
            </div>
        `;
        itemsContainer.appendChild(itemRow);
        
        itemRow.querySelector('.remove-item-btn').addEventListener('click', function() {
            itemRow.remove();
            updateSerialNumbers();
        });
        
        addNumberFormatting(itemRow.querySelector('.number-input'));
        updateSerialNumbers();
    }
    
    document.querySelectorAll('.number-input').forEach(addNumberFormatting);
    
    if(addItemBtn) {
        createItemRow();
        addItemBtn.addEventListener('click', createItemRow);
    }
    
    setLanguage('id'); // Set default language
    populateQuizMenu(); // Populate quiz menu on initial load
});


function addNumberFormatting(inputElement) {
    if (!inputElement) return;
    inputElement.addEventListener('input', (e) => {
        let value = e.target.value.replace(/\D/g, '');
        e.target.value = value ? new Intl.NumberFormat('id-ID').format(value) : '';
    });
}

function unformatNumber(formattedValue) {
    if (typeof formattedValue !== 'string') return 0;
    return formattedValue.replace(/[^0-9,-]/g, '').replace(/,.*$/, '');
}

function formatRupiah(number, includeSymbol = true) {
    if(includeSymbol) {
        return new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(Math.round(number));
    }
    return new Intl.NumberFormat('id-ID').format(Math.round(number));
}


function getFloatValue(id) {
    const element = document.getElementById(id);
    const value = element.value;
    if (id === 'main-pph-tarif') {
        return parseFloat(value) || 0;
    }
    return parseFloat(unformatNumber(value)) || 0;
}


function getFloatValueFromElement(element) {
    if (!element) return 0;
    if (element.classList.contains('number-input')) {
        return parseFloat(unformatNumber(element.value)) || 0;
    }
    return parseFloat(element.value) || 0;
}

function calculateMain() {
    const pphTarif = getFloatValue('main-pph-tarif'); 
    const shipmentAdditions = getFloatValue('main-insurance') + getFloatValue('main-freight') + getFloatValue('main-royalty') + getFloatValue('main-warranty');
    const totalDiscount = getFloatValue('main-discount');
    const items = document.querySelectorAll('#items-container .item-row');

    if (items.length === 0) { alert('Mohon tambahkan setidaknya satu barang.'); return; }
    
    let grandTotalCost = 0;
    items.forEach(row => { grandTotalCost += getFloatValueFromElement(row.querySelector('.item-cost')); });

    if (grandTotalCost === 0) { alert('Total Cost barang tidak boleh nol.'); return; }

    const resultsBody = document.getElementById('pib-results-body');
    const resultsFoot = document.getElementById('pib-results-foot');
    const explanationDiv = document.getElementById('pib-calculation-explanation');
    resultsBody.innerHTML = '';
    explanationDiv.innerHTML = '<h3>Rincian Proses Perhitungan</h3>';
    
    let totalBMUnrounded = 0;
    let totalBMADUnrounded = 0;
    let total = { np: 0, ni: 0, ppn: 0, pph: 0 };

    items.forEach((row, index) => {
        const serial = index + 1;
        const itemCost = getFloatValueFromElement(row.querySelector('.item-cost'));
        const itemBMTarif = getFloatValueFromElement(row.querySelector('.item-bm-tarif')) / 100;
        const itemBMADTarif = getFloatValueFromElement(row.querySelector('.item-bmad-tarif')) / 100;
        
        const costProportion = grandTotalCost > 0 ? itemCost / grandTotalCost : 0;
        const apportionedAdditions = shipmentAdditions * costProportion;
        const apportionedDiscount = totalDiscount * costProportion;
        
        const np = (itemCost + apportionedAdditions) - apportionedDiscount;
        const bmUnrounded = np * itemBMTarif;
        const bmadUnrounded = np * itemBMADTarif;
        
        totalBMUnrounded += bmUnrounded;
        totalBMADUnrounded += bmadUnrounded;
        
        const ni = np + bmUnrounded;
        const ppn = Math.floor(ni * 0.11);
        const niBasisPph = Math.floor(ni / 1000) * 1000;
        const pph = Math.floor(niBasisPph * pphTarif);

        total.np += np;
        total.ni += ni;
        total.ppn += ppn;
        total.pph += pph;

        const resultRow = document.createElement('tr');
        resultRow.innerHTML = `
            <td>${serial}</td>
            <td class="text-right">${formatRupiah(np)}</td>
            <td class="text-right">${formatRupiah(bmUnrounded)}</td>
            <td class="text-right">${formatRupiah(bmadUnrounded)}</td>
            <td class="text-right">${formatRupiah(ni)}</td>
            <td class="text-right">${formatRupiah(ppn)}</td>
            <td class="text-right">${formatRupiah(pph)}</td>
        `;
        resultsBody.appendChild(resultRow);
        
        explanationDiv.innerHTML += `
            <div class="mb-4 p-2 border-l-4 border-blue-500">
                <p class="font-semibold">Barang #${serial}:</p>
                <p class="text-sm"><strong>Nilai Pabean:</strong> (${formatRupiah(itemCost, false)} + ${formatRupiah(apportionedAdditions, false)}) - ${formatRupiah(apportionedDiscount, false)} = <strong>${formatRupiah(np)}</strong></p>
                <p class="text-sm"><strong>Bea Masuk:</strong> ${formatRupiah(np)} x ${itemBMTarif*100}% = <strong>${formatRupiah(bmUnrounded)}</strong></p>
                <p class="text-sm"><strong>Nilai Impor (Dasar PDRI):</strong> ${formatRupiah(np)} + ${formatRupiah(bmUnrounded)} = <strong>${formatRupiah(ni)}</strong></p>
                <p class="text-sm"><strong>PPN:</strong> ${formatRupiah(ni)} x 11% = ${formatRupiah(ni*0.11)} -> dibulatkan menjadi <strong>${formatRupiah(ppn)}</strong></p>
                <p class="text-sm"><strong>PPh 22:</strong> (Dasar: ${formatRupiah(niBasisPph)}) x ${pphTarif*100}% = ${formatRupiah(niBasisPph*pphTarif)} -> dibulatkan menjadi <strong>${formatRupiah(pph)}</strong></p>
            </div>
        `;
    });
    
    const totalBMRounded = Math.ceil(totalBMUnrounded / 1000) * 1000;
    const totalBMADRounded = Math.ceil(totalBMADUnrounded / 1000) * 1000;

    explanationDiv.innerHTML += `
        <div class="mt-4 p-2 border-t-2 border-gray-200">
            <p class="font-semibold">Total Pungutan (dengan Pembulatan PIB):</p>
            <p class="text-sm"><strong>Total Bea Masuk:</strong> ${formatRupiah(totalBMUnrounded)} -> dibulatkan ke atas menjadi <strong>${formatRupiah(totalBMRounded)}</strong></p>
            <p class="text-sm"><strong>Total BM Anti Dumping:</strong> ${formatRupiah(totalBMADUnrounded)} -> dibulatkan ke atas menjadi <strong>${formatRupiah(totalBMADRounded)}</strong></p>
        </div>
    `;

    resultsFoot.innerHTML = `
        <tr>
            <td class="font-bold">TOTAL</td>
            <td class="text-right">${formatRupiah(total.np)}</td>
            <td class="text-right">${formatRupiah(totalBMRounded)}</td>
            <td class="text-right">${formatRupiah(totalBMADRounded)}</td>
            <td class="text-right">${formatRupiah(total.ni)}</td>
            <td class="text-right">${formatRupiah(total.ppn)}</td>
            <td class="text-right">${formatRupiah(total.pph)}</td>
        </tr>
    `;
    
    document.getElementById('pib-results-detail').classList.remove('hidden');
    document.getElementById('pib-calculation-explanation').classList.remove('hidden');
    document.getElementById('sanksi-placeholder').classList.add('hidden');
    document.getElementById('sanksi-content').classList.remove('hidden');
    populateSanksiCalculator();
}


function resetMain() {
    ['pib-number', 'main-insurance', 'main-freight', 'main-royalty', 'main-warranty', 'main-discount'].forEach(id => { document.getElementById(id).value = ''; });
    document.getElementById('main-pph-tarif').value = '0.025';
    document.getElementById('items-container').innerHTML = '';
    document.getElementById('add-item-btn').click();
    document.getElementById('pib-results-detail').classList.add('hidden');
    document.getElementById('pib-calculation-explanation').classList.add('hidden');
    
    document.getElementById('sanksi-content').classList.add('hidden');
    document.getElementById('sanksi-placeholder').classList.remove('hidden');
    document.getElementById('sanksi-result-container').classList.add('hidden');
}

function populateSanksiCalculator() {
    const sanksiItemsContainer = document.getElementById('sanksi-items-container');
    sanksiItemsContainer.innerHTML = '';
    const pibResults = document.querySelectorAll('#pib-results-body tr');

    pibResults.forEach((pibResultRow, index) => {
        const serial = index + 1;
        const npDeklarasi = pibResultRow.cells[1].innerText;
        
        const row = document.createElement('tr');
        row.dataset.serial = serial;
        row.innerHTML = `
            <td>${serial}</td>
            <td class="text-right">${npDeklarasi}</td>
            <td class="sanksi-input-np"><input type="text" class="input-field number-input" placeholder="Masukkan NP Seharusnya" inputmode="numeric"></td>
            <td class="sanksi-input-tarif hidden"><input type="number" class="input-field" placeholder="Masukkan Tarif BM Seharusnya (%)" inputmode="decimal"></td>
        `;
        sanksiItemsContainer.appendChild(row);
        addNumberFormatting(row.querySelector('.number-input'));
    });
    toggleSanksiInput(); 
}

function toggleSanksiInput() {
    const sanksiTable = document.getElementById('sanksi-input-table');
    const header = sanksiTable.querySelector('thead');
    const jenis = document.getElementById('sanksi-jenis-pelanggaran').value;

    if (jenis === 'nilai_pabean') {
        header.innerHTML = `<tr><th>Serial</th><th class="text-right">NP Deklarasi</th><th class="text-right">NP Seharusnya (Rp)</th></tr>`;
        document.querySelectorAll('.sanksi-input-np').forEach(el => el.classList.remove('hidden'));
        document.querySelectorAll('.sanksi-input-tarif').forEach(el => el.classList.add('hidden'));
    } else { 
        header.innerHTML = `<tr><th>Serial</th><th class="text-right">NP Deklarasi</th><th class="text-right">Tarif BM Seharusnya (%)</th></tr>`;
        document.querySelectorAll('.sanksi-input-np').forEach(el => el.classList.add('hidden'));
        document.querySelectorAll('.sanksi-input-tarif').forEach(el => el.classList.remove('hidden'));
    }
}


function calculateSanksi() {
    const jenisKesalahan = document.getElementById('sanksi-jenis-pelanggaran').value;
    const jenisImportir = document.getElementById('sanksi-jenis-importir').value;
    const sanksiItems = document.querySelectorAll('#sanksi-items-container tr');
    const pibItems = document.querySelectorAll('#items-container .item-row');
    const totalBMDibayarRounded = parseFloat(unformatNumber(document.querySelector('#pib-results-foot tr').cells[2].innerText));

    let totalBMSeharusnyaUnrounded = 0;

    sanksiItems.forEach((row, index) => {
        const npDeklarasiText = row.cells[1].innerText;
        const npDeklarasi = parseFloat(unformatNumber(npDeklarasiText));
        
        let bmSeharusnya = 0;
        if (jenisKesalahan === 'nilai_pabean') {
            const npSeharusnya = getFloatValueFromElement(row.querySelector('.sanksi-input-np input'));
            const tarifBMDeklarasi = getFloatValueFromElement(pibItems[index].querySelector('.item-bm-tarif')) / 100;
            bmSeharusnya = npSeharusnya * tarifBMDeklarasi;
        } else {
            const tarifBMSeharusnya = getFloatValueFromElement(row.querySelector('.sanksi-input-tarif input')) / 100;
            bmSeharusnya = npDeklarasi * tarifBMSeharusnya;
        }
        totalBMSeharusnyaUnrounded += bmSeharusnya;
    });

    const totalBMSeharusnyaRounded = Math.ceil(totalBMSeharusnyaUnrounded / 1000) * 1000;
    
    if (totalBMSeharusnyaRounded < totalBMDibayarRounded) {
        alert('Total BM Seharusnya tidak boleh lebih kecil dari yang sudah dibayar.');
        return;
    }

    const kekuranganBayar = totalBMSeharusnyaRounded - totalBMDibayarRounded;
    let persentaseKekurangan = 0;
    if (totalBMDibayarRounded > 0) {
        persentaseKekurangan = (kekuranganBayar / totalBMDibayarRounded) * 100;
    } else if (kekuranganBayar > 0) {
        persentaseKekurangan = Infinity;
    }

    let tarifDenda = 0;
    if (jenisImportir === 'umum') {
        if (persentaseKekurangan <= 25) tarifDenda = 100;
        else if (persentaseKekurangan <= 50) tarifDenda = 200;
        else if (persentaseKekurangan <= 75) tarifDenda = 300;
        else if (persentaseKekurangan <= 100) tarifDenda = 400;
        else if (persentaseKekurangan <= 125) tarifDenda = 500;
        else if (persentaseKekurangan <= 150) tarifDenda = 600;
        else if (persentaseKekurangan <= 175) tarifDenda = 700;
        else if (persentaseKekurangan <= 200) tarifDenda = 800;
        else if (persentaseKekurangan <= 225) tarifDenda = 900;
        else tarifDenda = 1000;
    } else { 
        if (persentaseKekurangan <= 20) tarifDenda = 100;
        else if (persentaseKekurangan <= 40) tarifDenda = 200;
        else if (persentaseKekurangan <= 60) tarifDenda = 300;
        else if (persentaseKekurangan <= 80) tarifDenda = 400;
        else tarifDenda = 500;
    }
    
    const denda = kekuranganBayar * (tarifDenda / 100);

    document.getElementById('sanksi-total-bm-dibayar').innerText = formatRupiah(totalBMDibayarRounded);
    document.getElementById('sanksi-total-bm-seharusnya').innerText = formatRupiah(totalBMSeharusnyaRounded);
    document.getElementById('sanksi-result-kurang').innerText = formatRupiah(kekuranganBayar);
    document.getElementById('sanksi-result-persen').innerText = `${persentaseKekurangan.toFixed(2)}%`;
    document.getElementById('sanksi-result-tarif').innerText = `${tarifDenda}%`;
    document.getElementById('sanksi-result-denda').innerText = formatRupiah(denda);
    document.getElementById('sanksi-result-container').classList.remove('hidden');
}

function calculateImporSementara() {
    const bm = getFloatValue('is-bm');
    const ppn = getFloatValue('is-ppn');
    const pph = getFloatValue('is-pph');
    const jangkaWaktu = getFloatValue('is-jw');

    if (bm === 0 || jangkaWaktu === 0) {
        alert("Mohon isi total pungutan dan jangka waktu.");
        return;
    }
    
    const totalPungutan = bm + ppn + pph;
    const perBulan = totalPungutan * 0.02; // 2%
    const totalBayar = perBulan * jangkaWaktu;

    document.getElementById('is-total-pungutan').innerText = formatRupiah(totalPungutan);
    document.getElementById('is-per-bulan').innerText = formatRupiah(perBulan);
    document.getElementById('is-total-bayar').innerText = formatRupiah(totalBayar);
    document.getElementById('is-result-container').classList.remove('hidden');
}


// --- EXPORT FUNCTIONS ---

function exportPIB(type) {
    const pibNumber = document.getElementById('pib-number').value || 'data_pib';
    const table = document.getElementById('pib-results-table');
    const wb = XLSX.utils.table_to_book(table, {sheet: "DetailPIB"});
    
    if (type === 'xlsx') {
        XLSX.writeFile(wb, `${pibNumber}.xlsx`);
    } else if (type === 'csv') {
        const csv = XLSX.utils.sheet_to_csv(wb.Sheets.DetailPIB);
        downloadFile(csv, `${pibNumber}.csv`, 'text/csv');
    }
}

function exportSanksi(type) {
    const pibNumber = document.getElementById('pib-number').value || 'data_pib';
    const filename = `sanksi_${pibNumber}`;
    
    const data = [
        ["Keterangan", "Nilai"],
        ["Total BM Dibayar", unformatNumber(document.getElementById('sanksi-total-bm-dibayar').innerText)],
        ["Total BM Seharusnya", unformatNumber(document.getElementById('sanksi-total-bm-seharusnya').innerText)],
        ["Kekurangan Pembayaran BM", unformatNumber(document.getElementById('sanksi-result-kurang').innerText)],
        ["Persentase Kekurangan (%)", document.getElementById('sanksi-result-persen').innerText.replace('%', '')],
        ["Tarif Denda Berlaku (%)", document.getElementById('sanksi-result-tarif').innerText.replace('%', '')],
        ["Total Denda", unformatNumber(document.getElementById('sanksi-result-denda').innerText)]
    ];

    const ws = XLSX.utils.aoa_to_sheet(data);
    const wb = XLSX.utils.book_new();
    XLSX.utils.book_append_sheet(wb, ws, "RingkasanSanksi");

    if (type === 'xlsx') {
        XLSX.writeFile(wb, `${filename}.xlsx`);
    } else if (type === 'csv') {
        const csv = XLSX.utils.sheet_to_csv(ws);
        downloadFile(csv, `${filename}.csv`, 'text/csv');
    }
}

function downloadFile(content, fileName, mimeType) {
    const a = document.createElement('a');
    const blob = new Blob([content], { type: mimeType });
    a.href= URL.createObjectURL(blob);
    a.download = fileName;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
}

// --- QUIZ FUNCTIONS ---
let currentQuizCategory = null;

function populateQuizMenu() {
    const grid = document.getElementById('quiz-category-grid');
    grid.innerHTML = '';
    const lang = document.documentElement.lang || 'id';

    for (let i = 1; i <= 9; i++) {
        const catKey = `cat${i}`;
        const titleKey = `quiz_cat_${i}_title`;
        const descKey = `quiz_cat_${i}_desc`;
        
        const title = translations[titleKey] ? translations[titleKey][lang] : `Category ${i}`;
        const description = translations[descKey] ? translations[descKey][lang] : `Description for category ${i}`;

        const card = document.createElement('div');
        card.className = 'quiz-category-card';
        card.onclick = () => startQuiz(catKey);
        card.innerHTML = `
            <h3 class="text-xl font-bold text-gray-800 mb-2">${title}</h3>
            <p class="text-gray-500">${description}</p>
        `;
        grid.appendChild(card);
    }
}

function startQuiz(categoryKey) {
    currentQuizCategory = categoryKey;
    const quiz = quizData[categoryKey];
    const lang = document.documentElement.lang || 'id';
    
    document.getElementById('quiz-menu').classList.add('hidden');
    document.getElementById('quiz-results-container').classList.add('hidden');
    
    const quizContainer = document.getElementById('quiz-container');
    const questionsContainer = document.getElementById('quiz-questions-container');
    const titleEl = document.getElementById('quiz-header-title');
    const submitBtn = document.getElementById('submit-quiz-btn');
    
    titleEl.textContent = translations[`quiz_cat_${categoryKey.substring(3)}_title`][lang];
    submitBtn.textContent = translations['btn_submit_quiz'][lang];
    questionsContainer.innerHTML = '';

    quiz.questions.forEach((q, index) => {
        const questionDiv = document.createElement('div');
        questionDiv.className = 'quiz-question';
        questionDiv.innerHTML = `<p class="font-semibold text-lg mb-4">${index + 1}. ${q.q}</p>`;

        if (quiz.type === 'mcq') {
            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'quiz-options space-y-2';
            const shuffledOptions = [...q.a].map(value => ({ value, sort: Math.random() })).sort((a, b) => a.sort - b.sort).map(({ value }) => value);

            shuffledOptions.forEach(option => {
                optionsDiv.innerHTML += `
                    <label>
                        <input type="radio" name="q${index}" value="${option}">
                        <span>${option}</span>
                    </label>
                `;
            });
            questionDiv.appendChild(optionsDiv);
        } else if (quiz.type === 'essay') {
            questionDiv.innerHTML += `
                <textarea class="input-field essay-answer" placeholder="Ketik jawaban Anda di sini..."></textarea>
                <div class="model-answer hidden">
                    <h4 class="font-bold mb-2">Kunci Jawaban:</h4>
                    <p>${q.modelAnswer.replace(/\n/g, '<br>')}</p>
                </div>
            `;
        }
        questionsContainer.appendChild(questionDiv);
    });

    submitBtn.onclick = submitQuiz;
    quizContainer.classList.remove('hidden');
}

function submitQuiz() {
    const quiz = quizData[currentQuizCategory];
    const questions = document.querySelectorAll('#quiz-questions-container .quiz-question');
    
    if (quiz.type === 'mcq') {
        let score = 0;
        questions.forEach((qEl, index) => {
            const originalQuestion = quiz.questions[index];
            const correctAnswer = originalQuestion.a[originalQuestion.correct];
            const selectedRadio = qEl.querySelector('input[type="radio"]:checked');
            
            qEl.querySelectorAll('label').forEach(label => {
                const radio = label.querySelector('input');
                const span = label.querySelector('span');
                
                // Disable all radios after submission
                radio.disabled = true;
                
                // Highlight correct answer
                if (span.textContent === correctAnswer) {
                    label.classList.add('correct-answer');
                }
                
                // Check if user selected this option
                if (radio.checked) {
                    if (span.textContent === correctAnswer) {
                        score++;
                    } else {
                        label.classList.add('wrong-answer');
                    }
                }
            });
        });
        showMCQResults(score, questions.length);
    } else if (quiz.type === 'essay') {
        questions.forEach(qEl => {
            qEl.querySelector('textarea').disabled = true;
            qEl.querySelector('.model-answer').classList.remove('hidden');
        });
        document.getElementById('submit-quiz-btn').classList.add('hidden');
    }
}

function showMCQResults(score, total) {
    document.getElementById('quiz-container').classList.add('hidden');
    document.getElementById('quiz-results-container').classList.remove('hidden');
    
    const percentage = Math.round((score / total) * 100);
    document.getElementById('quiz-score').textContent = `${percentage}%`;
    document.getElementById('quiz-summary').textContent = `Anda menjawab dengan benar ${score} dari ${total} soal.`;
}

function returnToQuizMenu() {
    document.getElementById('quiz-container').classList.add('hidden');
    document.getElementById('quiz-results-container').classList.add('hidden');
    document.getElementById('quiz-menu').classList.remove('hidden');
    document.getElementById('submit-quiz-btn').classList.remove('hidden');
}

</script>
</body>
</html>
